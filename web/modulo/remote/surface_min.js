var svGlobal={version:"4.8.9",build:"759",log:1,isMultitask:hi5.browser.isMultitask,util:{},logger:{debug:function(l){if(svGlobal.log>2)console.log(l)},info:function(l){if(svGlobal.log>1)console.log(l)},warn:function(l){if(svGlobal.log>0)console.log(l)}}};function cancelDefault(l){if(l.preventDefault)l.preventDefault();if(l.stopPropagation)l.stopPropagation();return false}
function LocalInterface(l){function H(c){var d=hi5.tool.cumulativePos(c);if(rb)d.y+=c.scrollTop;return d}function v(c){var d=c-hi5.browser.innerHeight;if(d>10&&d<22)c=hi5.browser.innerHeight;return c}function D(c){if(t.detectInput&&L&&fa)if(Ba||fa.system=="text"||fa.system=="none")setTimeout(function(){bb(true)},5);else setTimeout(function(){bb(false)},5);if(document.activeElement!=c){var d=c;var e;var a;for(var b=[];d.parentElement;){d=d.parentElement;e=getComputedStyle(d);if(e){a=e.getPropertyValue("overflow");
if(e.getPropertyValue("display")=="block")b.push([d,d.scrollTop,d.scrollLeft])}}c.focus();if(b.length){var f=0;for(var g=b.length;f<g;f++){d=b[f];if(d[0].scrollTop!=d[1]||d[0].scrollLeft!=d[2]){d[0].scrollTop=d[1];d[0].scrollLeft=d[2]}b[f]=null}b=null}}}function I(){var c=[];this.sent=0;this.types=[];var d=this;this.datas=c;this.setData=function(e,a){if(e=="text/plain"||e=="text/html"){if(a.length>2&&a.substring(0,3)=="`\t`")a=a.substring(3);a=a.replace(/\r?\n/g,"\r\n")}d.types.push(e);c.push(a)};
this.getData=function(e){var a=c[d.types.indexOf(e)];if(!a&&e=="text/richtext")a=c[d.types.indexOf("text/html")];return a};this.removeData=function(e){var a=d.types.indexOf(e);if(a!=-1){d.types.splice(a,1);c.splice(a,1)}};this.equals=function(c){if(!c)return false;if(!hi5.Arrays.equals(d.types,c.types))return false;var a;var b;var f;var g=d.types;var r=0;for(var x=g.length;r<x;r++){a=g[r];b=d.getData(a);f=c.getData(a);if(b!=f)return false}return true}}function R(c){function d(a){a.focus();if(typeof window.getSelection!=
"undefined"&&typeof document.createRange!="undefined"){var c=document.createRange();c.selectNodeContents(a);c.collapse(false);var b=window.getSelection();b.removeAllRanges();b.addRange(c)}else if(typeof document.body.createTextRange!="undefined"){var e=document.body.createTextRange();e.moveToElementText(a);e.collapse(false);e.select()}}function e(){var a=T?c.value:u.isFirefox?c.textContent:c.innerText;if(k&&!T&&a.charAt(0)!=B.PLACE_HOLDER)a=B.PLACE_HOLDER+a;return a}function a(){if(k)if(T){if(c.setSelectionRange)c.setSelectionRange(c.value.length,
c.value.length)}else d(c)}function b(){if(B){var a=k||X&&L?B.PLACE_HOLDER:"";n=a;B.setValue(a)}}function f(){setTimeout(b,100)}function g(a){J=a.keyCode;if(B.onkeydown)B.onkeydown(a)}function r(a){if(B.onkeyup)B.onkeyup(a);var c=a.keyCode;if(c==13||c==32&&J==32)f()}function x(a){if(B.onkeypress)B.onkeypress(a)}function z(a){if(B.onbackspace)for(var c=0;c<a;c++)B.onbackspace()}function G(a){if(B.disableTextInput)return;a.stopPropagation();var d=e();var g=d.length;if(g>1&&d.charAt(0)!=B.PLACE_HOLDER&&
d.charAt(g-1)==B.PLACE_HOLDER){d=B.PLACE_HOLDER+d.substring(0,g-1);B.setValue(d)}if(d==n)return;var r=n.length;var x=d.indexOf(n);if(d&&x===0){d=d.substring(r);if(d.length>0&&l&&B.ontextinput){B.ontextinput({data:d,"target":c});if(d=="."){b();return}}}else{x=n.indexOf(d);if(x===0){if(J!=8)z(r-g)}else if(l){if(k){r--;d=d.substring(1)}z(r);if(d.length>0&&B.ontextinput)B.ontextinput({data:d,"target":c})}}if(e()==="")f();n=e()}function h(a){if(B.disableTextInput)return;if(!a.data)return;a.stopPropagation();
if(B.ontextinput)B.ontextinput(a);if(a.data==".")B.setValue("")}var B=this;var k=u.isAndroid&&u.isChrome;var l=u.isFirefox||u.isOpera;var m=!u.isRIM;var n="";var J=0;var T="INPUT"==c.nodeName||"TEXTAREA"==c.nodeName;var ma="DIV"==c.nodeName;this.PLACE_HOLDER="`";this.setValue=function(a){var b=B.disableTextInput;B.disableTextInput=true;if(T)c.value=a;else if(ma)c.innerHTML=a;B.disableTextInput=b};this.init=b;this.disableTextInput=false;b();c.addEventListener("keydown",g,false);c.addEventListener("keyup",
r,false);c.addEventListener("keypress",x,false);if(l){c.addEventListener("input",G,false);if(k)c.onclick=b;else c.addEventListener("mouseup",b,false)}else{c.addEventListener("textInput",h,false);c.addEventListener("textinput",h,false)}this.release=function(){B=null;c.removeEventListener("keydown",g,false);c.removeEventListener("keyup",r,false);c.removeEventListener("input",G,false);c.removeEventListener("focus",b,false);c.removeEventListener("textInput",h,false);c.removeEventListener("textinput",
h,false);c=null};this.select=function(){sb(c)}}function Y(c,d,e){function a(a){var c=0;var e=0;var z=0;var G=Ga(a);var h=a.deltaMode||0;var B=!!a.deltaX||!!a.wheelDeltaX;a.preventDefault();a.stopPropagation();if(h==1){d(-a.deltaY||-a.deltaX,G,B);return}var k="deltaY"in a;var l=k?40:"wheelDelta"in a?120:0;if(l){z=Date.now();if(z-f>100)b=0;e=-a.deltaY||-a.deltaX||a.wheelDelta;if(e!=0){b+=e;c=b/l|0;b=b%l;if(c!==0)d(c,G,B)}f=z}else{c=-a.detail;if(Math.abs(c)==32768){e=window.innerHeight/40|0;c=c<0?-e:
e}d(c,G,false)}}var b=0;var f=0;c.addEventListener("DOMMouseScroll",a,true);c.addEventListener("mousewheel",a,true)}function ia(c){function d(a){if(f)return;if(g.onmousedown)g.onmousedown(a)}function e(a){if(f)return;if(g.onmousemove)g.onmousemove(a)}function a(a){if(f){f=false;return}if(g.onmouseup)g.onmouseup(a)}function b(a){var c=a.type;if(c=="touchstart")f=true;if(g.ontouch)g.ontouch(a)}var f=false;var g=this;var r=navigator.pointerEnabled||navigator.msPointerEnabled||false;if("ontouchstart"in
window||!r){c.addEventListener("touchstart",b,false);c.addEventListener("touchend",b,false);c.addEventListener("touchmove",b,false);c.addEventListener("touchcancel",b,false);c.addEventListener("mousemove",e,false);c.addEventListener("mousedown",d,false);c.addEventListener("mouseup",a,false)}else if(navigator.pointerEnabled){c.addEventListener("pointerdown",b,false);c.addEventListener("pointerup",b,false);c.addEventListener("pointermove",b,false);c.addEventListener("pointercancel",b,false)}else if(navigator.msPointerEnabled){c.addEventListener("MSPointerDown",
b,false);c.addEventListener("MSPointerUp",b,false);c.addEventListener("MSPointerMove",b,false);c.addEventListener("MSPointerCancel",b,false)}}function na(){return!oa&&U<=window.innerWidth&&O<=window.innerHeight}function pa(c){function d(a){if(a<256)return a;var c=f.indexOf(a);if(c!=-1)return c;f.push(a);return f.length-1}function e(a,c){var b;var e=a.length;var g=new Array(e);for(var f=0;f<e;f++){b=a[f];var h=Ha(b.clientX,b.clientY,l);g[f]={"contactId":d(b.identifier),"contactFlags":c,"x":h.x,"y":h.y}}return g}
function a(a){var c=b.length;for(var d=0;d<c;d++)if(b[d].contactId==a)return d;return-1}var b;var f=[];var g=false;this.handle=function(d){var x=d.type;var z=d.touches;var G;var h;var B=d.changedTouches;cancelDefault(d);switch(x){case "touchstart":g=false;h=z.length;G=e(z,25);b=G;break;case "touchmove":G=e(B,26);var k=false;if(b.length>0&&G.length==1){var l=a(G[0].contactId);if(l!=-1&&b[l].x==G[0].x&&b[l].y==G[0].y)k=true}if(k)return;else if(b.length>0){c.redirectTouches(b);b.length=0}c.redirectTouches(G);
g=true;break;case "touchend":if(!g){c.redirectTouches(b);h=b.length;for(var m=0;m<h;m++)b[m].contactFlags=4;G=b}else G=e(B,4);c.redirectTouches(G);f.length=b.length=0;break;case "touchcancel":c.redirectTouches(e(B,34));f.length=b.length=0}}}function ua(c){function d(a){var c=a[1].screenX-a[0].screenX;var b=a[1].screenY-a[0].screenY;return Math.sqrt(c*c+b*b)}function e(a){if(a.length!=2)return false;var c=a[1].screenX-a[0].screenX;var b=a[1].screenY-a[0].screenY;return Math.abs(b)>100||Math.abs(c)>
350}function a(a){var c=0;var b=0;var d=0;var e=9999;var z=0;for(var g=a.length;z<g;z++){if(a[z].screenY>d){d=a[z].screenY;c=z}if(a[z].screenY<e){e=a[z].screenY;b=z}}return[{screenX:a[b].screenX,screenY:a[b].screenY,identifier:a[b].identifier},{screenX:a[c].screenX,screenY:a[c].screenY,identifier:a[c].identifier}]}function b(a,c){var b=[];var e=f(a,S[0].identifier)||f(c,S[0].identifier);if(e)b.push(e);e=f(a,S[1].identifier)||f(c,S[1].identifier);if(e)b.push(e);var z="";if(b.length!=2)return z;var g=
d(b)-d(S);if(Math.abs(g)<60){var r=80;if(b[0].screenX-S[0].screenX>r)z="RIGHT";else if(S[0].screenX-b[0].screenX>r)z="LEFT";else if(b[0].screenY-S[0].screenY>r)z="DOWN";else if(S[0].screenY-b[0].screenY>r)z="UP"}else z=g<0?"CLOSE":"OPEN";return z}function f(a,c){var b=0;for(var d=a.length;b<d;b++)if(a[b].identifier==c)return a[b];return null}function g(a){this.identifier=a.pointerId;this.clientX=a.clientX;this.clientY=a.clientY;this.pageX=a.pageX;this.pageY=a.pageY;this.screenX=a.screenX;this.screenY=
a.screenY}var r=0;var x=0;var z=0;var G=0;var h=false;var k=0;var m=0;var n=0;var p=0;var q=false;var J=false;var T=3;var ma=false;if(X)T*=3;this.delay=false;var S=[];var u=this;this.handlePointer=function(a){if(a.pointerType==a.MSPOINTER_TYPE_MOUSE||a.pointerType=="mouse")switch(a.type){case "MSPointerDown":case "pointerdown":Ia(a);break;case "pointermove":case "MSPointerMove":Ja(a);break;case "pointerup":case "MSPointerUp":Ka(a)}else{a.touches=a.changedTouches=[new g(a)];u.handle(a)}};this.handle=
function(d){var g=d.type;var u=0;var t=d.touches;var y=d.changedTouches;var v=0;var A=0;var F=0;var C;switch(g){case "touchstart":case "MSPointerDown":case "pointerdown":moveCount=0;moveSpace=0;ma=false;x="touchstart"==g?t.length:x+1;J=false;G=Date.now();h=x==1&&G-z<200;F=t[0];r=F.identifier;C=Ha(F.clientX,F.clientY,l);k=C.x|0;m=C.y|0;q=true;ma=e(t);if(h||x>2)cancelDefault(d);if(x==3)S=a(t);break;case "pointermove":case "MSPointerMove":if(x>1)break;case "touchmove":if(ma)return;F=y[t.length-1];if(F.identifier!=
r){F=f(y,r);if(!F){cancelDefault(d);return}}C=Ha(F.clientX,F.clientY,l);v=C.x|0;A=C.y|0;if(q){if(v-k===0&&A-m===0)return;if(Math.abs(v-k)<T&&Math.abs(A-m)<T){cancelDefault(d);return}q=false;u=Date.now()-G;J=u<88;if(J&&!na()&&x==1){ma=true;return}c.touchstart({"x":k,"y":m,"flick":J,"pointes":x,"screenX":F.screenX,"screenY":F.screenY,"moved":true,"target":d.target})}cancelDefault(d);c.touchmove({"x":v,"y":A,"flick":J,"pointes":x,"moved":true,"screenX":F.screenX,"screenY":F.screenY,"target":d.target});
break;case "MSPointerUp":case "touchend":case "pointerup":if(ma)return;if(y.length+t.length==3){c.touchend({"x":v,"y":A,"flick":J,"pointes":x,"moved":!q,"target":d.target,"gesture":b(t,y)});x=0;break}else{if(x>2){x=0;break}F=f(y,r);if(F){var E=Date.now();C=Ha(F.clientX,F.clientY,l);v=C.x|0;A=C.y|0;if(!J){u=E-G;if(q){z=E;if(!h){n=v;p=A}else cancelDefault(d);if(u<500){z=E;c.touchstart({"x":n,"y":p,"flick":false,"pointes":x,"screenX":F.screenX,"screenY":F.screenY,"moved":false,"target":d.target});c.touchend({"x":n,
"y":p,"flick":false,"pointes":x,"moved":false,"screenX":F.screenX,"screenY":F.screenY,"target":d.target})}else c.longpress({"x":v,"y":A,"flick":false,"pointes":x,"moved":false,"screenX":F.screenX,"screenY":F.screenY,"target":d.target})}else c.touchend({"x":v,"y":A,"flick":false,"pointes":x,"moved":true,"screenX":F.screenX,"screenY":F.screenY,"target":d.target})}else c.touchend({"x":v,"y":A,"flick":true,"pointes":x,"moved":!q,"screenX":F.screenX,"screenY":F.screenY,"target":d.target})}}x=0;break;case "MSPointerCancel":case "touchcancel":x=
0}if(h)cancelDefault(d)}}function A(){n(true,14);n(false,14)}function sb(c){try{if(c.select)c.select();else u.selectEditable(c)}catch(d){svGlobal.logger.info(d)}}function yc(c,d){if(c.value)c.value=d;else c.innerHTML=d}function ac(){function c(){b.focus()}function d(a,b){var d=document.createElement("a");d.href="#";d.accessKey=a;d.onfocus=c;d.style.position="absolute";d.style.width=1;d.style.height=1;d.style.left=0;d.style.top=b+"px";return d}var e=h.forceTextArea||u.isIE;var a=document.createElement(e?
"textarea":"div");var b=this;this.element=a;this.setFontSize=function(c){a.style.fontSize=t.inputFontSize||c};if(e){a.style.opacity=0;a.readOnly=L&&u.isMetro?true:false}else a.contentEditable=L&&!(u.isChrome&&(u.isWindows||u.isCrOS))?false:true;a.autocomplete=u.isChrome?"new-password":"off";a.autocorrect="off";a.autocapitalize="off";a.spellcheck="false";a.accessKey="f";a.id="wsinput";a.tabIndex=1;a.style.opacity=0;a.style.resize="none";a.style.position="absolute";a.style.margin="0";a.style.border=
"none";a.style.outline="none";var f=hi5.tool.getPos(l,true);a.style.left=f.x+"px";a.style.top=f.y+"px";a.style.paddingRight=0;a.style.paddingBottom=0;a.style.width="10px";a.style.height="10px";a.style.zIndex=88;a.style.cursor="default";a.style.fontWeight="normal";a.style.fonStyle="normal";a.style.overflow="hidden";if(L)a.style.fontSize="1em";if(u.isiOS){a.addEventListener("focus",function(a){setTimeout(function(){a.target.style.fontSize="0px"},333)},false);a.addEventListener("blur",function(a){a.target.style.fontSize=
"1em"},false)}else if(u.isFirefox)a.style.fontSize=0;else a.style.textIndent="-999em";K=new R(a);K.onbackspace=A;var g=l.parentNode;g.appendChild(a);if(X){g.appendChild(d("E"),60);g.appendChild(d("V"),61);g.appendChild(d("A"),62);g.appendChild(d("T"),63);g.appendChild(d("H"),64)}var r=a.style.opacity;var x=a.style.textIndent;this.resetCSS=function(){_fontSize=a.style.fontSize;r=a.style.opacity;a.style.opacity=0;a.style.textIndent=0};this.restoreCSS=function(){a.style.opacity=r;a.style.textIndent=
x};this.getValue=function(){return e?a.value:a.innerHTML};this.setValue=function(c){if(K)K.disableTextInput=true;if(e)a.value=c;else a.innerHTML=c;if(K)K.disableTextInput=false};this.focus=function(){b.setValue(" ");D(a)};this.setContentEditable=function(c){if(e){var b=c=="true";if(a.readOnly==b)a.readOnly=!b}else a.setAttribute("contenteditable",c)};this.isIMEMode=false;this.setIMEStatus=function(c){if(c){if(!b.isIMEMode){if(e){a.style.background="transparent";a.style.opacity=1}b.isIMEMode=true}}else if(b.isIMEMode){if(e){a.style.background=
"";a.style.opacity=0}b.isIMEMode=false}};this.adjust=function(c){var b=hi5.tool.getPos(l,true);q.offX=b.x;q.offY=b.y;var d=h.railWin?Math.min(window.innerWidth-b.x,U):U;var e=h.railWin?Math.min(window.innerHeight-b.y,O):O;var g=0;var r=0;if(L){g=Math.max(window.pageXOffset+100,b.x);r=Math.max(window.pageYOffset+100,b.y)}else{var x=Math.min(window.innerWidth-b.x,U);var f=Math.min(window.innerHeight-b.y,O);g=Math.round(x*.7);r=Math.round(f*(c?.99:.7))}var J=d-g;var k=e-r;if(t.disableAdjust){g=0;r=0;
J=l.offsetWidth;k=l.offsetHeight}a.style.width=J+"px";a.style.height=k+"px";a.style.paddingLeft=g+"px";a.style.paddingTop=r+"px";a.style.left=b.x+"px";a.style.top=b.y+"px"};this.remove=function(){if(K){K.release();K=null}if(a.parentNode)a.parentNode.removeChild(a);a=null};this.hide=function(){a.style.visibility="hidden"};this.getElement=function(){return a};this.select=function(){sb(a)}}function bc(){var c=window.innerWidth;var d=window.innerHeight;return Math.max(U,O)<Math.max(c,d)&&Math.min(U,O)<
Math.min(c,d)}function Ca(){function c(){if(!t.text)t.text={};return t.text}function d(a){return(a.measureText("W").width+1)*1.2}function e(a){var c=(a&16777215).toString(16).toUpperCase();return"00000".substring(0,6-c.length)+c}function a(a,b,d,x,f){if(g){var h=c();a.fillStyle=h.backgroundFillStyle||"white";a.fillRect(b,d-f+2,x,f);a.fillStyle=h.fillStyle||"#337788";a.textBaseline="bottom";a.fillText(g,b+3,d-2);a.strokeStyle="#"+e(g.hashCode());a.lineWidth=2;a.beginPath();a.moveTo(b,d);var k=x*.382|
0;a.lineTo(b+k,d);a.stroke();a.strokeStyle="#"+e(r);a.beginPath();a.moveTo(b+k+1,d);a.lineTo(b+x,d);a.stroke()}}function b(){var b=k.getContext("2d");var e=b.getImageData(0,0,k.cursorWidth,k.cursorHeight);if(g){b.font=c().font||"11px Arial";var r=d(b)+4;k.width=Math.max(k.cursorWidth,b.measureText(g).width+4);k.height=k.cursorHeight+r;a(b,0,k.height-1,k.width,r)}else{k.width=k.cursorWidth;k.height=k.cursorHeight}b.putImageData(e,0,0)}if(k)return;var f=l.parentNode;var g="";var r=0;k=f.querySelector('canvas[name="svImgCursor"]');
if(k)return;k=document.createElement("canvas");k.name="svImgCursor";k.style.position="absolute";k.style.left=90;k.style.top=90;k.scrX=0;k.scrY=0;k.hotX=10;k.hotY=10;k.width=k.height=32;k.style.visibility="hidden";k.style.zIndex=87;k.setCursor=function(b){var e=b.width;var r=b.height;var x=b.rawData;var f=k.getContext("2d");if(x&&e&&r){var h=e*r;var l=0;var m=0;var J=f.createImageData(e,r);var T=J.data;var n=0;var S=0;if(g){f.font=c().font||"11px Arial";n=f.measureText(g).width;S=d(f)+4}k.cursorWidth=
e;k.cursorHeight=r;k.hotX=b.hotX;k.hotY=b.hotY;k.width=Math.max(e,n+4);k.height=r+S+4;if(g)a(f,0,k.height-1,k.width,S);for(var p=0;p<h;p++){l=x[p];T[m++]=l&255;T[m++]=l>>8&255;T[m++]=l>>16&255;T[m++]=l>>24&255}f.putImageData(J,0,0,0,0,e,r)}};k.hideCursor=function(){k.style.visibility="hidden"};if(fa&&fa.rawData)k.setCursor(fa);else{var x=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-16777216,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-16777216,-16777216,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-16777216,-1,-16777216,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-16777216,-1,-1,-16777216,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-16777216,-1,-1,-1,-16777216,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-16777216,-1,-1,-1,-1,-16777216,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-16777216,-1,-1,-1,-1,-1,-16777216,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-16777216,-1,-1,-1,-1,-1,-1,-16777216,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-16777216,-1,-1,-1,-1,-1,-1,-1,-16777216,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-16777216,-1,-1,-1,-1,-1,-1,-1,-1,-16777216,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-16777216,-1,-1,-1,-1,-1,-1,-1,-1,-1,-16777216,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-16777216,-1,-1,-1,-1,-1,-1,-16777216,-16777216,-16777216,-16777216,-16777216,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,-16777216,-1,-1,-1,-16777216,-1,-1,-16777216,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-16777216,-1,-1,-16777216,-16777216,-1,-1,-16777216,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-16777216,-1,-16777216,0,0,-16777216,-1,-1,-16777216,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-16777216,-16777216,0,0,0,-16777216,-1,-1,-16777216,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-16777216,0,0,0,0,0,-16777216,-1,-1,-16777216,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,-16777216,-1,-1,-16777216,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-16777216,-1,-1,-16777216,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-16777216,-1,-1,-16777216,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-16777216,-16777216,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];k.setCursor({"rawData":x,"width":32,"height":32,"hotX":10,"hotY":10})}k.moveCursor=function(a,c,d,e){k.style.left=a+"px";k.style.top=c+"px";
if(g!=d||r!=e){g=d;r=e;b()}};f.appendChild(k)}function cc(){fa=null;if(k){if(k.parentNode)k.parentNode.removeChild(k);k=null}}function cb(c){if(t.disableScrollbars===false)return;var d=document.body;if(c){db=c;d.style.overflow=c;return}var e=U<=window.innerWidth&&O<=window.innerHeight;db=e?"hidden":"visible";d.style.overflow=db}function Da(c){var d=l.parentNode;if(bc()){if(P!=1){hi5.tool.scale(d,1);P=ba=1}return}document.body.style.overflow="hidden";P=ba=c?Math.min(window.innerWidth/U,window.innerHeight/
O):1;hi5.tool.scale(d,P,P)}function tb(){if(!m)m=new ac;m.adjust()}function eb(){if(h.toolbar)h.toolbar.removeButton("svCloud");else{var c=hi5.$("svCloud");if(c)c.parentNode.removeChild(c)}}function ub(){var c=chrome.app.window.current();if(c)c.fullscreen()}function dc(){va=null;if(document){var c=m.element;document.removeEventListener("mousemove",Ja,false);c.removeEventListener("mousedown",Ia,false);document.removeEventListener("mouseup",Ka,false);c.removeEventListener("mouseleave",La,false);c.removeEventListener("mouseenter",
La,false);c.removeEventListener("paste",y.onPaste,false);c.removeEventListener("copy",y.onCopy,false);c.removeEventListener("cut",y.onCopy,false);document.removeEventListener("visibilitychange",ec,false);if(y){document.removeEventListener("paste",y.onPaste,false);document.removeEventListener("copy",y.onCopy,false);document.removeEventListener("cut",y.onCopy,false)}}if(window){window.removeEventListener("resize",vb,false);window.removeEventListener("beforeunload",wb,false);window.removeEventListener("focus",
xb,false);window.removeEventListener("blur",yb,false);window.removeEventListener("unload",Ma,false);cc();if(h&&h.toolbar){h.toolbar.setFadable=null;h.toolbar.startFade=null;h.toolbar.style.display="none";hi5.ui.clean(h.toolbar);h.toolbar=null}try{if(ra&&ra.parentNode){ra.parentNode.removeChild(ra);ra=null}if(m){m.remove();m=null}}catch(d){}}}function fb(c,d){if(!c)c="div";var e=document.createElement(c);var a=document.body;e.id="_tmpEditable";if(c=="div"&&d!==false){e.contentEditable=true;if(X)e.style.textIndent=
"-999px"}e.style.position="absolute";e.style.zIndex=9999;e.style.left=a.scrollLeft+50+"px";e.style.top=a.scrollTop+50+"px";e.tabIndex=2;e.style.outline="none";e.style.opacity=0;a.appendChild(e);return e}function xb(c){gb.clearPDF();h.focused=true;p.onfocus(c);if(ca){if(p.fromSyncedSurface)da=p.fromSyncedSurface(200);else da=false;if(!da)p.send("8910")}Na=true;V.sendMissKey(true)}function wb(c){var d=__svi18n.remoteApp.close;var e=zb||!h.railWin||!h.railWin.isRunning()||!d;if(e)return;if(!c)c=window.event;
if(p.getAppMode()!=2){h.showMessage(d);if(c)c.returnValue=d;return d}}function Ma(c){if(h){h.focused=false;if(h.onunload)h.onunload()}}function hb(){if(m){m.element.oncontextmenu=function(){return false};if(!X)m.element.onselectstart=function(){return false}}}function Ab(){if(m){m.element.oncontextmenu=null;m.element.onselectstart=null}}function vb(c){if(m)m.adjust();if(wa)Da(true);else{if(oa&&Date.now()-oa<2500)return;var d=u.isWindows&&!u.isMetro;if(!L||d&&!oa||u.isCrOS||u.isChromeApp)p.onresize(c)}}
function yb(){if(h){h.focused=false;h.blurTime=Date.now()}}function fc(){if(!window.svSurface)window.svSurface=h;window.addEventListener("resize",vb,false);if(ga)return;var c=!u.isChromeApp;if(c)window.addEventListener("beforeunload",wb,false);if(c)window.addEventListener("unload",Ma,false);else chrome.runtime.onSuspend.addListener(Ma);hb();window.addEventListener("focus",xb,false);window.addEventListener("blur",yb,false);if(u.isChromeApp&&!t.disableMaxFullScn)chrome.app.window.current().onMaximized.addListener(ub);
var d=hi5.$("saveSession");if(d)d.addEventListener("change",function(c){p.saveSession({save:c.target.checked})})}function zc(c){return c.replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Bb(){if(ja)return;var c=hi5.$("touchGesture");if(c)c.style.display="block";var d=hi5.$("extKBD");if(d)d.onchange=function(a){h.setExtKeyboard(a.target.checked)};ja=hi5.$("svTouchInput");try{if(window.parent!=window&&!ja)ja=window.parent.document.getElementById("svTouchInput")}catch(a){}if(!ja)return;if(ja.nodeName!=
"IMG"){var e=document.createElement("img");e.id="svTouchInput";e.src=t.img&&t.img.kbd||"kbd.png";ja.parentNode.replaceChild(e,ja);ja=e}}function Ac(){if(!ra)return;ra.style.display="block";if(ib)clearTimeout(ib);ib=setTimeout(inputTimeout,3E3)}function xa(c,d){function e(a,c){var b=document.createElement("span");b.data_path=a;b.className="path";b.innerHTML=c;b.onclick=function(){xa(this.data_path,d)};return b}function a(a){for(var c=f;c.hasChildNodes();)c.removeChild(c.firstChild);var b=e("/","&nbsp&nbsp&nbsp/");
c.appendChild(b);if(a=="/"||a==="")return;var d=a.split("/");var h="/";var k=0;for(var l=d.length;k<l;k++){var m=d[k];if(m==="")continue;h=h+d[k]+"/";b=e(h,m+"/");c.appendChild(b)}}function b(c){function b(a){if(!a)a=f.getValue("Name");var d=c.parent;if(d===""||d.charAt(d.length-1)!="/")d+="/";d+=a;return d}if(c.error)h.showMessage(__svi18n.file[c.error]);var e=new hi5.DataTable(c);var f=new hi5.DataGrid(hi5.$("filelist"));f.dataTable=e;var k=hi5.tool.bytesToSize;f.beforeDisplayValue=function(a,c){var b=
e.cols[a].name;if(b=="Date Modified")return(new Date(c)).toLocaleString();else if(b=="Size")return k(c);else if(b=="Type"&&"folder"==c)return __svi18n.file.folder;else if(b=="Name")return decodeURIComponent(c);else return c};f.onrowclick=function(a){var e=f.getValue("Name");var x=f.getValue("Type");var h=b(e);var k=a.target.name;if(k=="delete"){M.removeFile(h);xa(c.parent,d);return}if(x=="folder"){var J=c.parent=="/"?"":c.parent;xa(J+"/"+e,d);return}if(k=="view")h+="&action=view";p.getFile(h)};f.beforeAppendRow=
function(a){var c;var d=e.getValue(e.getColNo("Type"));if(d=="folder"){c=a.querySelector('img[name="download"]');if(c)c.style.visibility="hidden";return}a.draggable=true;var g=f.getValue("Name");var h=b(g);h="application/octet-stream:"+g+":"+p.getFileLink(h);a.addEventListener("dragstart",function(a){a.dataTransfer.setData("DownloadURL",h)},false);if(g.length>10&&g.substring(g.length-10)==".uploading"){c=a.querySelector('img[name="download"]');if(c)c.style.visibility="hidden";c=a.querySelector('img[name="view"]');
if(c)c.style.visibility="hidden"}};f.open();a(c.parent);var l=document.getElementById("__diskSpace");if(l)l.innerHTML=hi5.tool.bytesToSize(c.freeSpace)+"/"+hi5.tool.bytesToSize(c.totalSpace);d.resize();d.__position="\\\\tsclient\\"+c.name+c.parent.replace(new RegExp("/","g"),"\\")}var f=hi5.$("parentPath");if(!f.currentDir)f.currentDir="/";if("."==c)c=f.currentDir;else f.currentDir=c;f.currentDir=c;p.getShareFiles(c,b)}function Cb(c){if(c)cancelDefault(c);var d=hi5.$("filecontainer");Z=new hi5.Lightbox(d);
xa(".",Z);Z.show();var e=document.getElementById("__sv_folder__");if(e&&M.mkdirs)e.onclick=function(){var a=document.getElementById("__sv_folder_name_");if(a&&a.value){M.mkdirs(a.value);xa(".",Z)}};e=document.getElementById("__sv_position__");if(e)e.onclick=function(){p.writeKeyComb("Windows+R");setTimeout(function(){p.writeText(Z.__position);W(true,28);W(false,28)},555);Z.dismiss()}}function Db(){var c=hi5.$("svToolbar");if(!c)return;var d=c.childNodes;var e=false;var a=0;for(var b=d.length;a<b;a++)if(d[a].nodeType==
1&&["svTouchInput","svCloud","svInfo"].indexOf(d[a].id)==-1){e=true;break}var f=hi5.$("appinfo");if(f)f.className="h5-form";var g=h.showToolbar&&(L||M||f||e);if(g){c.style.left=window.innerWidth*.45+"px";var r=h.toolbar===null;if(r)h.toolbar=new hi5.Toolbar(c,t.toolbar.draggable,t.img.handle||"handle.png");if(!L){var x=hi5.$("svTouchInput");if(x)x.parentNode.removeChild(x)}var z=h.toolbar.getButton("svCloud");if(z)if(M){z.style.display="";z.onclick=Cb}else z.style.display="none";var k=t.toolbar.fadeDelay||
5E3;new hi5.Fadable(h.toolbar,k,m.element);var l=t.toolbar.fadable;h.toolbar.setFadable(l);if(l)h.toolbar.style.display="none";z=h.toolbar.getButton("svInfo");if(z)if(f){z.style.display="";if(r)z.onclick=function(a){cancelDefault(a);var c=p.getAppInfo();var b=hi5.$("numericId");if(b)b.innerHTML=c.numericId;b=hi5.$("connectingTo");if(b)b.innerHTML=c.server;b=hi5.$("joinLink");if(b)b.href=b.innerHTML=c.joinLink;var d=new hi5.Lightbox(hi5.$("appinfo"));d.show();Ab();d.onclose=hb}}else z.style.display=
"none";if(h.onloadtoolbar)h.onloadtoolbar(h.toolbar)}}function gc(){return m.element}function Eb(c){M.addFiles(c.target.files,false);var d=hi5.$("uploadfile");var e=d.cloneNode(true);var a=d.parentNode;a.replaceChild(e,d);e.addEventListener("change",Eb,false)}function hc(){var c=gc();if(ka)ka.release();ka=new svGlobal.util.MapDisk(c,M,true);if(hi5.$("filecontainer")){Oa=new svGlobal.util.MapDisk(hi5.$("filecontainer"),M,false);hi5.$("uploadfile").addEventListener("change",Eb,false)}}function La(c){if(k)k.hideCursor()}
function ec(){if(document.hidden==false&&l)setTimeout(function(){if(l&&p){l.width++;l.width--;var c=p.refresh(q.left,q.top,q.right,q.bottom);if(c)E.putImageData(c.imgData,c.left-q.left,c.top-q.top,0,0,c.width,c.height)}},50)}function Fb(c){if(E){if(c-jb>Gb)if(q.isMultiMon){var d=Ea(q.left,q.top,q.right,q.bottom);if(d){E.putImageData(d.imgData,d.left-q.left,d.top-q.top,0,0,d.width,d.height);jb=c}}else{d=Ea(0,0,q.right,q.bottom);if(d){E.putImageData(d.imgData,d.left,d.top,0,0,d.width,d.height);jb=c}}Pa=
requestAnimationFrame(Fb)}}function Bc(c){c=c.replace(/<br\/?>/gi,"\r\n").replace(/(<([^>]+)>)/gi,"");return c.replace(/&[^;]+;/gi,function(c){return ic[c]||c})}function Hb(c,d,e){if(!k)Ca();if(k.style.visibility=="hidden")k.style.visibility="visible";var a=k.scrX;var b=k.scrY;var f=a+c;var g=b+d;if(f<0)f=0;else if(f>U)f=U-1;if(g<0)g=0;else if(g>O)g=O-1;k.scrX=f;k.scrY=g;var r=f-k.hotX;var x=g-k.hotY;if(X){r=r/P|0;x=x/ba|0}k.style.left=r+q.offX+"px";k.style.top=x+q.offY+"px";if(N&&!e)p.sendInput("82"+
f+"\t"+g);q.x=f;q.y=g}function Qa(c,d,e){if(X){c=c/P|0;d=d/ba|0}h.moveCursor(c,d,e)}function bb(c){if(m)m.setContentEditable(c?"true":"false");else{var d=document.getElementById("wsinput");if(d)input.setAttribute("contenteditable",c?"true":"false")}oa=c?1:0;if(aa)aa.setVisibility(c);if(h.toolbar){var e=h.toolbar.getButton("svTouchInput");if(e)e.className=c?"h5-img-btn-on":"h5-img-btn"}}function Ib(){Ba=!Ba;if(Ba&&m)m.adjust();bb(Ba);if(m)m.element.focus()}function kb(c,d,e,a){var b;var f;var g;switch(c){case "touchstart":lb=
false;if(k.scrX===0&&k.scrY===0)Qa(d-50,e-50);if(a){if(h.beforemousedown)h.beforemousedown(k.scrX,k.scrY,0);p.sendInput("80"+k.scrX+"\t"+k.scrY+"\t0")}break;case "touchmove":b=d-Ra;f=e-ya;if(b===0&&f===0)return;g=Math.abs(Jb)<5&&Math.abs(Kb)<5&&(Math.abs(b)>7||Math.abs(f)>7);if(!g){Hb(b,f);lb=true}Jb=b;Kb=f;break;case "touchend":var r=!lb&&!a;if(r){if(h.beforemousedown)h.beforemousedown(k.scrX,k.scrY,0);p.sendInput("80"+k.scrX+"\t"+k.scrY+"\t0")}if(r||a){p.sendInput("81"+k.scrX+"\t"+k.scrY+"\t0");
if(h.aftermouseup)h.aftermouseup(k.scrX,k.scrY,0)}}Ra=d;ya=e}function Lb(c,d){Qa(c,d);Sa(c,d,2);Ta(c,d,2)}function jc(c,d,e,a){var b=e-c;var f=a-d;var g=Math.max(Math.abs(f),Math.abs(b))/2|0;if(g>0){var r=b/g|0;var x=f/g|0;for(var z=0;z<g;z++){c+=r;d+=x;Ua(c,d)}}if(c!=e||d!=a)Ua(e,a)}function kc(c){if(N&&sa)if("ontouchstart"in window)sa.handle(c);else sa.handlePointer(c)}function lc(c){if(!N)return false;c.stopPropagation();V.check(c);var d=ea.getKeyCode(c);var e=c.type=="keydown";if(e)if(m)m.setIMEStatus(d==
229);if(d==18){if(Mb&&e)mb=2==(c.location||c.keyLocation);if(mb)return true}if(Nb(c,d,e))return cancelDefault(c);if(d==17&&!e)Fa=false;var a=nb(d,c);if(a>0){n(e,a);var b=c.target==m.element;var f=e&&za&&m&&d==17&&(u.isFirefox||u.isSafari||X&&!b);if(f)if(b){m.setValue("`\t`");m.select()}else{Q.setValue("`\t`");Q.select()}return cancelDefault(c)}if(C||c.altKey&&!mb||c.metaKey){var g=d==86&&(C||c.metaKey)&&!(C&&c.altKey)&&ca;if(!g)ha(e,d,c.key);if(e)Va=d;if(d==17||(C||c.metaKey)&&(d==86||d==67||d==88)){if(e)if(d==
67||d==88)Fa=true;return true}return c.altKey&&!C||C&&!c.altKey||c.metaKey?cancelDefault(c):true}else{if(d==Va&&!e&&!(C&&c.altKey)){ha(false,d,c.key);Va=0;return cancelDefault(c)}Va=0;return true}}function Nb(c,d,e){switch(d){case 8:case 35:if(!C&&!c.metaKey)return false;if(!c.altKey||t.disableShortcuts)return false;n(e,211);break;case 33:if(!c.altKey||t.disableShortcuts)return false;n(e,15);break;case 34:if(!c.altKey||t.disableShortcuts)return false;if(e){n(true,42);n(true,15)}else{n(false,15);n(false,
42)}break;case 45:if(!c.altKey||t.disableShortcuts)return false;n(e,1);break;case 36:if(!c.altKey||t.disableShortcuts)return false;if(e){n(false,56);n(true,29);n(true,1)}else{n(false,1);n(false,29)}break;case 124:n(e,59);break;case 125:n(e,62);break;case 126:n(e,63);break;case 127:n(e,64);break;case 128:n(e,87);break;case 129:n(e,88);break;default:return false}return true}function mc(c){if(!Na||V.preKeyCode==229||V.preKeyCode==0)return;V.ignoreText=true;var d=String.fromCharCode(c.charCode||c.keyCode||
w.which);if(d.toUpperCase()==d.toLowerCase())return;var e=d.toUpperCase()==d;var a=c.shiftKey?!e:e;Na=false;if(p.capsLock!=a){p.sendKeyboardSynchronize(false,p.numLock,a);if(V.preKeyCode){W(true,14);W(false,14);var b=ea.getScancodeByKeyCode(V.preKeyCode);W(true,b);W(false,b)}}}function nc(c){if(!N)return false;V.check(c);var d=ea.getKeyCode(c);var e=c.type=="keydown";var a=V.preKeyCode;if(e){if(m)m.setIMEStatus(d==229)}else if(m&&m.isIMEMode)if(X)if(m)m.setIMEStatus(false);V.preKeyCode=d;if(d==229||
a==229&&!e)return true;if(Nb(c,d,e))return cancelDefault(c);if(oc(d,e,c))return cancelDefault(c);var b=ea.getScancode(c);var f=nb(d,c)<1&&!C&&!c.altKey&&!c.metaKey;if(!b)b=nb(d,c)||0;var g=d==86&&(Ob&&!e||(c.ctrlKey||c.metaKey)&&!(c.ctrlKey&&c.altKey))&&ca;if(b>0)if(g){if(Wa&&e)Wa.sendCtrlVLater()}else n(e,b);if(d!=17)Ob=g;if(d==17||(C||c.metaKey)&&(d==86||d==67||d==88)){if(e){if(d==17&&za&&m){m.setValue("Copying... Please try again");m.select()}if(d==67||d==88)Fa=true}if(d==17&&!e)Fa=false;return true}var r=
d==144||d==16||Na&&f;return r?false:cancelDefault(c)}function pc(c){if(!N)return;if(V.ignoreText){V.ignoreText=false;return}var d=c.data;if(!L&&Xa&&d.length==1&&d.charCodeAt(0)<128)return;if(d=="`\t`")return;var e=C||ta;if(e)d=d.toLowerCase();d=d.replace(/\u00a0/g," ");p.sendInput("86"+d+"\t"+(e||Xa?1:0));if(aa)aa.resetModifier()}function Pb(c,d){var e=c?c.getData(d):null;if(e&&d=="text/plain"){var a=0;var b="";for(var f=e.length;a<f;a++){b=e.charAt(a);if(b!="\r"&&b!="\n")break}if(a)e=e.substring(a)}if(e){p.send("881"+
d+"\t"+e);c.sent=Date.now();return true}else if(h.onreqpaste){h.onreqpaste(d,function(a){p.send("881"+d+"\t"+a)},function(){p.send("881ERROR\t")});return true}else{p.send("881"+d+"\t"+"");return false}}function Ya(){n(true,29);ha(true,86);ha(false,86);n(false,29)}function qc(c){var d=c.types.length===0||c.equals(y.clipData);var e=d?"":c.types.join(",");var a=true;if(!d){if(e.indexOf("text/html")!=-1&&e.indexOf("text/richtext")==-1)e+=",text/richtext";var b=c.getData("text/plain");var f=b?b.hashCode():
0;p.send("880"+e+"\t"+f);y.clipData=c}if(h.onclipdata)a=!h.onclipdata(c,d);if(a)setTimeout(Ya,500)}function oc(c,d,e){if(c==44){if(C||e.shiftKey){n(true,128|55);n(false,128|55)}else{n(true,128|42);n(true,128|55);n(false,128|55);n(false,128|42)}return true}if(c==19)if(d){n(true,225);n(true,29);n(true,69);n(true,225);n(true,157);n(true,197);return true}else{n(false,29);return true}return false}function W(c,d){if(h.onscancode){var e=h.onscancode(c,d);if(e){var a=0;for(var b=e.length;a<b;a++)p.sendInput("84"+
(e[a].down?0:49152)+"\t"+e[a].key);return}}p.sendInput("84"+(c?0:49152)+"\t"+d)}function n(c,d){if(!N)return;switch(d){case 221:if(c){W(true,221);W(false,221);return}break;case 58:if(c){p.capsLock=!p.capsLock;if(Qb){W(true,58);W(false,58);return}}break;case 69:if(c)p.numLock=!p.numLock;break;default:if(d>70&&d<84&&p.sendKeyboardSynchronize)p.sendKeyboardSynchronize(false,true,p.capsLock)}if(d==184){W(c,29);W(c,56);return}var e=!c&&(u.isCrOS&&d>61&&d<69||d==58&&Qb||d==95);if(e)W(true,d);if(d!=95)W(c,
d)}function ha(c,d,e){if(!N)return;if(d==111){if(c)p.sendInput("86/\t1");return}var a="8B"+(c?0:49152)+"\t"+d;if(e)a+="\t"+e;p.sendInput(a)}function Sa(c,d,e,a,b){if(!N)return false;D(m.element);if(!a)a=P;if(!b)b=ba;if(va[e])return;va[e]=true;c=(c/a|0)+q.left;d=(d/b|0)+q.top;if(h.beforemousedown)h.beforemousedown(c,d,e);p.sendInput("80"+c+"\t"+d+"\t"+e)}function Ia(c){if(m)m.setIMEStatus(false);if(!(C||c.shiftKey||c.metaKey||c.altKey))V.sendMissKey();var d=Ga(c);Sa(d.x,d.y,c.button);return cancelDefault(c)}
function Ua(c,d,e,a){if(!e)e=P;if(!a)a=ba;c=(c/e|0)+q.left;d=(d/a|0)+q.top;if(c<0)c=0;if(d<0)d=0;if(h.onmousemove)h.onmousemove(c,d);q.x=c;q.y=d;p.sendInput("82"+c+"\t"+d)}function Ja(c){if(!Rb)return false;if(c.target!=m.element&&!va[0])return false;var d=Ga(c,m.element);if(Za&&(u.isAndroid||u.isiOS||!fa.system))Qa(d.x,d.y,true);Ua(d.x,d.y);return cancelDefault(c)}function Ta(c,d,e,a,b){if(!a)a=P;if(!b)b=ba;va[e]=false;c=(c/a|0)+q.left;d=(d/b|0)+q.top;if(c<0)c=0;if(d<0)d=0;p.sendInput("81"+c+"\t"+
d+"\t"+e);if(h.aftermouseup)h.aftermouseup(c,d,e);if(u.isChrome&&y)y.waitForCopyContent()}function Ka(c){if(!N)return false;if(c.target!=m.element&&!va[0])return false;var d=c.target;var e=Ga(c,m.element);Ta(e.x,e.y,c.button);if(y)y.prePaste();return cancelDefault(c)}function Sb(c,d,e,a,b){if(!a)a=P;if(!b)b=ba;c=(c/a|0)+q.left;d=(d/b|0)+q.top;if(h.onmousewheel)if(h.onmousewheel(c,d,e))return;p.sendInput("83"+c+"\t"+d+"\t"+e)}function Tb(c,d){if(!N)return false;var e=Math.abs(c);var a=c<0?1:0;for(var b=
0;b<e;b++)Sb(d.x,d.y,a);return false}function nb(c,d){var e=d.keyCode;if(e==17)return d.location==2?157:29;else if(e==16)return d.location==2?54:42;var a=rc[c];if(!a)a=-1;return a}function sc(c,d,e){var a=document.createElement("canvas");var b=a.getContext("2d");var f=b.createImageData(d,e);var g=f.data;var r=d*e;var x=window.devicePixelRatio||1;var z=0;var h=0;var k=0;a.width=d;for(a.height=e;z<r;z++){k=c[z];g[h++]=k&255;g[h++]=k>>8&255;g[h++]=k>>16&255;g[h++]=k>>24&255}b.putImageData(f,0,0,0,0,
d,e);if(x==1)return a.toDataURL();else if(a.toDataURLHD)return a.toDataURLHD();else{var l=document.createElement("canvas");var m=l.getContext("2d");l.width=d*x|0;l.height=e*x|0;m.scale(x,x);m.drawImage(a,0,0);return l.toDataURL()}}function tc(c){if(c.none)return"none";else if(c.system)return c.system;else if(Za)return"none";else return"url("+(c.url||sc(c.rawData,c.width,c.height))+") "+c.hotX+" "+c.hotY+", default"}if(!l)l=hi5.$("remotectrl");if(window.svSurface&&svSurface.canvas==l&&svSurface.railWin){svSurface.railWin.mainWin=
null;return window.svSurface}var u=hi5.browser;var L=u.isTouch;var $a=false;var p=null;var wa=false;var P=1;var ba=1;l.style.outline="none";var U=0;var O=0;var uc=0;var vc=0;var E=l.getContext("2d");var K=null;var Q=null;var Ub=false;var C=false;var ta=false;var Aa=false;var zb=false;var da=false;var M=null;var ca=true;var Fa=false;var Ob=false;this.context=E;this.fileProgress=null;this.blurTime=0;var h=this;var N=true;var qa=false;var ga=false;var Xa=false;var Rb=true;var ra=null;var ib=null;var Z=
null;var k=null;var fa=null;var sa=null;var ja=null;var oa=0;var Ra=-1;var ya=-1;var Jb=0;var Kb=0;var lb=false;var db=null;var rb=false;var Na=true;var q={x:0,y:0,offX:0,offY:0,left:0,top:0,right:0,bottom:0,primary:false,isMultiMon:false};var Vb=0;var Wb=0;var ka=null;var Oa=null;var jb=0;var Ea;var ob=false;var Xb=0;var Pa=0;var Ba=false;this._cr=[82,69,77,79,84,69,83,80,65,82,75];window.svSurface=this;var t=hi5.appcfg||{img:{},toolbar:{fadable:true}};var X=u.isIE;var Za=X&&!t.disableCursor;var wc=
u.isChromeApp||X&&!u.isEdge||t.directClipAccess==true;this.setConfig=function(c){t=c};this.toolbar=null;this.railWin=null;this.focused=false;this.showToolbar=true;this.canvas=l;this.alwaysPaste=false;this.mouseMoveEmu=false;this.forceTextArea=false;if("visible"in t.toolbar)this.showToolbar=t.toolbar.visible;var Mb=false;var mb=false;var Ga=u.getMousePos;var Ha=u.calMousePos;this.getWindow=function(){return window};this.setMonitor=function(c,d,e,a){q.left=c;q.top=d;q.right=e;q.bottom=a;q.primary=c==
0&&d==0;if(e!=0&&a!=0){q.isMultiMon=false;h.setSize(e-c+1,a-d+1);q.isMultiMon=true;cb("hidden")}};this.isClipSynced=function(c){if(!da)return false;var d=Date.now()-h.blurTime;if(c&&d>c)return false;svGlobal.logger.info("clip synced in "+d);return true};this.getScale=function(){return{x:P,y:ba}};var la=null;var aa=null;var pb="";var za=!u.isChromeApp&&!t.copyDialog;this.getThumbnail=function(c){c=c||64;if(!la)la=document.createElement("canvas");var d=Math.floor(l.height/l.width*c);if(la.width!=c)la.width=
c;if(la.height!=d)la.height=d;la.getContext("2d").drawImage(l,0,0,l.width,l.height,0,0,c,d);return la.toDataURL()};this.initChat=function(c){var d=document.getElementById("chatWindow");hi5.Dragable(d);return new hi5.Chat(d,c)};this.equals=function(c){return l==c.canvas};this.getFreeSpace=function(){var c=hi5.tool.getPos(l);var d=window.innerWidth-c.x;var e=v(window.innerHeight)-c.y;if(d>screen.width)d=screen.width;if(e>screen.height)e=screen.height;return{"width":d,"height":e}};var ea=new function(){function c(a){var c=
null;var d="K"+a;if(d in x)c=x[d]();if(c===null)c=b;return c}var d=1033;var e=u.isFirefox;var a=u.isMacOS||u.isiOS;var b=[0|0];var f=null;b[3]=197;b[8]=14;b[9]=15;b[12]=76;b[13]=28;b[16]=42;b[17]=29;b[18]=56;b[19]=197;b[20]=58;b[27]=1;b[32]=57;b[33]=201;b[34]=209;b[35]=207;b[36]=199;b[37]=203;b[38]=200;b[39]=205;b[40]=208;b[44]=55;b[45]=210;b[46]=211;b[48]=11;b[49]=2;b[50]=3;b[51]=4;b[52]=5;b[53]=6;b[54]=7;b[55]=8;b[56]=9;b[57]=10;b[65]=30;b[66]=48;b[67]=46;b[68]=32;b[69]=18;b[70]=33;b[71]=34;b[72]=
35;b[73]=23;b[74]=36;b[75]=37;b[76]=38;b[77]=50;b[78]=49;b[79]=24;b[80]=25;b[81]=16;b[82]=19;b[83]=31;b[84]=20;b[85]=22;b[86]=47;b[87]=17;b[88]=45;b[89]=21;b[90]=44;b[91]=219;b[92]=220;b[93]=221;b[96]=82;b[97]=79;b[98]=80;b[99]=81;b[100]=75;b[101]=76;b[102]=77;b[103]=71;b[104]=72;b[105]=73;b[106]=55;b[107]=78;b[109]=74;b[110]=83;b[111]=181;b[112]=59;b[113]=60;b[114]=61;b[115]=62;b[116]=63;b[117]=64;b[118]=65;b[119]=66;b[120]=67;b[121]=68;b[122]=87;b[123]=88;b[144]=69;b[145]=70;b[154]=183;b[166]=59;
b[167]=60;b[168]=61;b[173]=66;b[174]=67;b[175]=68;b[182]=63;b[183]=62;b[216]=64;b[217]=65;b[186]=39;b[187]=13;b[188]=51;b[189]=12;b[190]=52;b[191]=53;b[192]=41;b[219]=26;b[220]=43;b[221]=27;b[222]=40;b[224]=29;b[225]=184;b[226]=86;var g=function(a){var c=a.keyCode;if(e){switch(c){case 173:return 189;case 61:return 187;case 59:return 186;case 224:return 17}return c}return c};this.converMacCtrl=true;var r=a?function(a){switch(a){case 91:case 93:return 17;case 17:return ea.converMacCtrl?91:17;case 229:return 69}return 0}:
null;this.setLayout=function(a){d=a;f=c(a);if(f!==null)svGlobal.logger.info("Keyboard layout: "+d)};this.getKeyCode=function(a){var c=0;if(r)c=r(a.keyCode);if(!c)c=g?g(a):a.keyCode;return c};this.getScancode=function(a){var c=ea.getKeyCode(a);if(c==17)return a.location==2?157:29;else if(c==16)return a.location==2?54:42;return f?f[c]:0};this.getScancodeByKeyCode=function(a){return f?f[a]:0};this.getCodeTable=function(){return f};this.getLayoutCreator=function(){return x};var x=new function(){function a(){var c=
b.slice(0);c[220]=41;c[219]=12;c[221]=13;c[186]=26;c[187]=27;c[191]=43;c[192]=39;c[189]=53;c[226]=86;if(e){c[171]=27;c[173]=53;g=function(a){var c=a.keyCode;var b=a.key;if(c===0)if(b=="\u00ba"||b=="\u00aa"&&a.shiftKey||b=="\\"&&a.ctrlKey&&a.altKey)return 220;else if(b=="\u00a1"||b=="\u00bf"&&a.shiftKey)return 221;else if(b=="\u00e7"||b=="\u00c7"&&a.shiftKey||b=="}"&&a.ctrlKey&&a.altKey)return 191;else if(b=="\u00f1"||b=="\u00d1"&&a.shiftKey)return 192;else{if(b=="DeadAcute"||b=="\u00b4\u00b4"||b==
"\u00b4"||b=="DeadUmlaut"&&a.shiftKey||b=="{"&&a.ctrlKey&&a.altKey)return 222}else if(c==192)return 186;else if(c==222)return 219;return c}}return c}function c(){var a=b.slice(0);a[220]=41;a[219]=12;a[221]=13;a[186]=26;a[187]=27;a[191]=43;a[192]=39;a[189]=53;a[226]=86;a[90]=21;a[89]=44;if(e)g=function(a){var c=a.keyCode;var b=a.key;switch(c){case 60:return 226;case 160:return 220;case 63:return 219;case 192:return 221;case 171:return 187;case 163:return 191;case 173:return 189;case 0:if(b=="\u00f6"||
b=="\u00d6"&&a.shiftKey)return 192;else if(b=="\u00e4"||b=="\u00c4"&&a.shiftKey)return 222;else if(b=="\u00fc"||b=="\u00dc"&&a.shiftKey)return 186}return c};return a}function d(){var a=b.slice(0);a[222]=41;a[219]=12;a[189]=13;a[221]=26;a[186]=27;a[77]=39;a[192]=40;a[188]=50;a[190]=51;a[191]=52;a[187]=53;a[226]=86;a[65]=16;a[90]=17;a[81]=30;a[87]=44;if(e)g=function(a){var c=a.keyCode;var b=a.key;switch(c){case 60:return 226;case 169:return 219;case 173:return 189;case 160:return 221;case 164:return 186;
case 165:return 192;case 59:return 190;case 58:return 191;case 61:return 187;case 0:if(b=="\u00b2"||b=="\u00b3"&&a.shiftKey)return 222;else if(b=="\u00b5"||b=="`\u00b5"||b=="DeadGrave"||b=="\u00a3"&&a.shiftKey)return 220;else if((b=="`"||b=="``")&&a.ctrlKey&&a.altKey)return 220}return c};return a}function r(){var a=b.slice(0);a[222]=41;a[192]=40;a[226]=86;if(e)g=function(a){var c=a.keyCode;var b=a.key;switch(c){case 0:if(b=="\u00b0"||b=="\u00ac"&&a.ctrlKey&&a.altKey)return 222;else if(b=="\u00e7"||
b=="\u00c7"&&a.shiftKey)return 221;else if(b=="\u00e0"||b=="DeadGrave"||b=="\u00c0"&&a.shiftKey)return 220;else if(b=="\u00e8"||b=="\u00c8"&&a.shiftKey)return 192;else if(b=="\u00e9"||b=="\u00c9"&&a.shiftKey)return 191;else if(b=="\u00f9"||b=="\u00d9"&&a.shiftKey)return 226;else if(b=="DeadTilde")return 221;break;case 173:return 189;case 61:return 187;case 160:return 219;case 59:return 186}return c};return a}function f(){var a=b.slice(0);a[222]=41;a[219]=12;a[187]=13;a[221]=26;a[186]=27;a[220]=43;
a[77]=39;a[192]=40;a[190]=51;a[191]=52;a[223]=53;a[226]=86;a[65]=16;a[90]=17;a[81]=30;a[87]=44;a[188]=50;if(e)g=function(a){var c=a.keyCode;var b=a.key;switch(c){case 0:if(b=="\u00b2")return 222;else if(b=="\u00e7"||b=="\u00c7"&&a.shiftKey)return 221;else if(b=="\u00e0"||b=="\u00c0"&&a.shiftKey)return 220;else if(b=="\u00e8"||b=="\u00c8"&&a.shiftKey)return 192;else if(b=="\u00e9"||b=="\u00c9"&&a.shiftKey)return 189;else if(b=="\u00f9"||b=="\u00d9"&&a.shiftKey)return 226;else if(b=="DeadTilde")return 221;
break;case 60:return 226;case 169:return 219;case 61:return 187;case 160:return 221;case 164:return 186;case 170:return 220;case 165:return 192;case 59:return 190;case 58:return 191;case 161:return 223}return c};return a}function x(){var a=b.slice(0);a[191]=41;a[219]=12;a[221]=13;a[186]=26;a[192]=27;a[223]=43;a[222]=39;a[220]=40;a[188]=51;a[190]=52;a[189]=53;a[226]=86;a[90]=21;a[89]=44;if(e)g=function(a){var c=a.keyCode;var b=a.key;switch(c){case 0:if(b=="\u00a7"||b=="\u00b0"&&a.shiftKey)return 191;
else if(b=="\u00e0"||b=="\u00e4"&&a.shiftKey||b=="{"&&a.ctrlKey&&a.altKey)return 220;else if(b=="\u00e8"||b=="\u00fc"&&a.shiftKey||b=="["&&a.ctrlKey&&a.altKey)return 186;else if(b=="\u00e9"||b=="\u00f6"&&a.shiftKey)return 222;break;case 222:return 219;case 160:return 221;case 161:return 192;case 164:return 223;case 173:return 189;case 60:return 226}return c};return a}function h(){var a=b.slice(0);a[220]=41;a[187]=12;a[219]=13;a[221]=26;a[186]=27;a[191]=43;a[192]=39;a[222]=40;a[189]=53;a[226]=86;if(e)g=
function(a){var c=a.keyCode;var b=a.key;switch(c){case 0:if(b=="\u00e5"||b=="\u00c5"&&a.shiftKey)return 221;else if(b=="\u00f8"||b=="\u00d8"&&a.shiftKey||b=="\u00f6"&&a.ctrlKey&&a.altKey)return 192;else if(b=="\u00e6"||b=="\u00c6"&&a.shiftKey||b=="\u00e4"&&a.ctrlKey&&a.altKey)return 222;break;case 172:return 220;case 171:return 187;case 220:return 219;case 160:return 186;case 222:return 191;case 173:return 189;case 60:return 226}return c};return a}function k(){var a=b.slice(0);a[220]=41;a[187]=12;
a[219]=13;a[221]=26;a[186]=27;a[191]=43;a[192]=39;a[222]=40;a[189]=53;a[226]=86;if(e)g=function(a){var c=a.keyCode;var b=a.key;switch(c){case 0:if(b=="\u00a7"||b=="\u00bd"&&a.shiftKey)return 220;else if(b=="\u00e5"||b=="\u00c5"&&a.shiftKey)return 221;else if(b=="\u00f8"||b=="\u00d8"&&a.shiftKey||b=="\u00f6"&&a.ctrlKey&&a.altKey)return 192;else if(b=="\u00e4"||b=="\u00c4"&&a.shiftKey)return 222;break;case 171:return 187;case 192:return 219;case 160:return 186;case 222:return 191;case 173:return 189;
case 60:return 226}return c};return a}this.K3758162961=function T(){var a=b.slice(0);a[244]=41;a[243]=41;a[189]=12;a[222]=13;a[220]=125;a[192]=26;a[219]=27;a[187]=39;a[186]=40;a[221]=43;a[188]=51;a[190]=52;a[191]=53;a[226]=115;a[29]=123;a[28]=121;a[240]=112;a[242]=112;if(e){a[173]=12;a[160]=13;a[64]=26;a[59]=39;a[58]=40;g=function(a){return a.keyCode==220&&a.key=="_"?226:a.keyCode}}return a};this.K1034=this.K66570=this.K2058=this.K1040=this.K66576=a;this.K2057=function ma(){var a=b.slice(0);a[223]=
41;a[222]=43;a[192]=40;a[220]=86;if(e){a[192]=41;a[173]=12;a[61]=13;a[59]=39;a[222]=40;a[163]=43}return a};this.K1031=this.K4106=this.K5130=this.K6154=this.K7178=this.K8202=this.K9226=this.K10250=this.K11274=this.K12298=this.K13322=this.K14346=this.K15370=this.K16395=this.K17418=this.K18442=this.K19466=this.K20490=this.K99997=this.K66567=this.K2952791047=c;this.K2060=this.K99998=d;this.K3084=this.K4105=r;this.K1036=f;this.K4108=this.K2055=x;this.K1044=this.K1083=h;this.K1053=k;this.K1055=function(){var a=
b.slice(0);a[220]=52;a[223]=12;a[189]=13;a[191]=51;a[188]=43;a[190]=53;a[226]=86;if(e)g=function(a){var b=a.keyCode;var c=a.key;switch(b){case 0:if(c=="\u011f"||c=="\u011e"&&a.shiftKey||a.ctrlKey&&a.altKey&&a.code=="BracketLeft")return 219;else if(c=="\u00fc"||c=="\u00dc"&&a.shiftKey||a.ctrlKey&&a.altKey&&a.code=="BracketRight")return 221;else if(c=="\u015f"||c=="\u015e"&&a.shiftKey||a.ctrlKey&&a.altKey&&a.code=="Semicolon")return 186;else if(c=="\u00f6"||c=="\u00d6"&&a.shiftKey)return 191;else if(c==
"\u00e7"||c=="\u00c7"&&a.shiftKey)return 220;break;case 73:return 222;case 60:return 226;case 173:return 189;case 170:return 223;case 162:return 192}return b};return a}}};this.getKeyboardMgr=function(){return ea};var y=new function d(){function e(a){return a.search(/<.*(font|color|img|table|style|class).*>/gmi)>-1}function a(a,b){var d=y.parseClipData(b);if(t.copyTextOnly&&d.type!="text/plain")return;if(y.processFileGroup(d))return;if(u.isEdge&&d.type!="text/plain"){m.resetCSS();m.setValue(d.value);
m.select();setTimeout(function(){m.setValue("");if(Q)Q.setValue("");m.restoreCSS();y.processImgCopy(d.value)},555)}else{a.clipboardData.setData(d.type,d.value);if(d.type!="text/plain"){var e=hi5.browser.html2text(d.value);if(e)a.clipboardData.setData("text/plain",e);y.processImgCopy(d.value)}a.preventDefault()}}function b(a){return a.replace(/<br>/gi,"\n").replace(/&nbsp;/gi," ").replace(/&amp;/gi,"&").replace(/&quot;/gi,'"').replace(/&lt;/gi,"<").replace(/&gt;/gi,">")}function f(){if(!y)return;if(y.copyContent){y.copyToClipboard(y.copyContent.type,
y.copyContent.value);y.copyContent=null}y.waitingCopyContent=false}var g=0;this.hasCopyCmd=document.queryCommandSupported("copy");this.hasPasteCmd=document.queryCommandSupported("paste");this.release=function(){y.clipData=null};this.clipData=null;this.paste=function(a,b){var d=new I;var e=0;var g=null;var f=window.clipboardData||b.clipboardData;var h=window.clipboardData?f.getData("Text"):f.getData("text/plain");var k="";var l="";if(f.types)l=f.getData("text/html");if(l&&!h)h=hi5.browser.html2text(l);
if(h)d.setData("text/plain",h);if(t.pasteTextOnly){b.preventDefault();a(d);return}var m=f.items;if(m)for(e=0,len=m.length;e<len;e++){if(m[e].type=="image/png"){g=m[e].getAsFile();break}}else if(f.files){var n=f.files;for(e=0,len=n.length;e<len;e++)if(n[e].type.indexOf("image/png")!=-1){g=n[e];break}}if(g){var p=new FileReader;b.preventDefault();p.onloadend=function(b){if(b.target.readyState==FileReader.DONE){var e=hi5.Base64.enc(new Uint8Array(b.target.result));d.setData("image/png",e);a(d)}};p.readAsArrayBuffer(g);
return}if(!h){b.preventDefault();a(d);return}if(f.types){var q=f.types.indexOf?f.types.indexOf("text/rtf")!=-1:f.types.contains("text/rtf");k=f.getData("text/rtf");if(k){if(k.charCodeAt(k.length-1)==0)k=k.substring(0,k.length-1);d.setData("text/richtext",k)}if(l){e=l.lastIndexOf("</html>");if(e+7<l.length)l=l.substring(0,e+7);d.setData("text/html",l)}var u=hi5.browser.isEdge||q&&!k&&!l;if(!u){b.preventDefault();a(d);return}}if("TEXTAREA"==b.target.nodeName&&document.queryCommandSupported("paste")){b.preventDefault();
d=y.getClipContent(d);a(d);return}if(K)K.disableTextInput=true;if(Q)Q.disableTextInput=true;b.target.innerHTML="";var v=b.target.style.opacity;b.target.style.opacity=0;setTimeout(function(){var e=b.target.innerHTML;if(e&&e!=h){d.setData("text/html","<body>"+e+"</body>");if(K)K.init();else b.target.innerHTML=""}a(d);b.target.style.opacity=v;if(K)K.disableTextInput=false;if(Q)Q.disableTextInput=false},300)};this.onCopy=function(b){if(b.target!=m.element)return;if(!N||!ca)cancelDefault(b);if(!Fa){n(true,
29);var d=b.type=="copy"?"67":88;ha(true,d);ha(false,d);n(false,29)}if(Ub){var e=Date.now();var f=e-g;g=e;if(f>500)return}if(!ca||wc)return;pb=p.getClipData();a(b,pb);y.clipData=null;da=true;svGlobal.logger.info("clip synced: true")};this.onPaste=function(a){if(a.target!=m.element)return;if(Wa)Wa.cancelCtrlV();if(!N||!ca)return cancelDefault(a);if(!h.alwaysPaste&&da){var b=true;if(h.onclipdata)b=!h.onclipdata(y.clipData,true);if(b)setTimeout(Ya,500);svGlobal.logger.info("Ctrl+V only");return cancelDefault(a)}da=
true;y.paste(qc,a);return true};this.parseClipData=function(a){var b=a.indexOf(";");var d=a.substring(0,b);a=a.substring(b+1);return{type:d,value:a}};this.getClipContent=function(a){if(!document.queryCommandSupported("paste"))return a;var d=fb(t.pasteTextOnly?"textarea":"div");d.focus();try{if(document.queryCommandEnabled("paste")){var e=document.execCommand("paste");if(e){if(!a)a=new I;if(!t.pasteTextOnly)a.setData("text/html","<body>"+d.innerHTML+"</body>");if(a.types.indexOf("text/plain")==-1)a.setData("text/plain",
t.pasteTextOnly?d.value:d.innerText||b(d.innerHTML));return a}}}finally{d.parentNode.removeChild(d);if(m)m.focus()}return a};this.accessClip=function(a){if(!document.queryCommandSupported("paste"))a(null);var b=fb(t.pasteTextOnly?"textarea":"div");b.focus();b.addEventListener("paste",function(d){d.stopPropagation();y.paste(function(d){if(b.parentNode)b.parentNode.removeChild(b);if(m)m.focus();a(d)},d)},false);if(!document.queryCommandEnabled("paste")||!document.execCommand("paste")){a(null);if(b.parentNode)b.parentNode.removeChild(b);
if(m)m.focus()}};this.getContent=function(){var a=y.getClipContent();if(m)m.element.removeEventListener("click",y.getContent,false);if(a&&!a.equals(y.clipData)){y.clipData=a;p.send("880text/plain,text/html\t0");return true}else return false};this.startPasteCmd=function(){if(m&&document.queryCommandSupported("paste"))m.element.addEventListener("click",y.getContent)};this.waitingCopyContent=false;this.copyContent=null;this.waitForCopyContent=function(){y.waitingCopyContent=true;setTimeout(f,700)};this.prePaste=
function(){if(da||!document.queryCommandEnabled("paste")&&!window.clipboardData)return;y.accessClip(function(a){if(!a)return;var b=a.types.length===0||a.equals(y.clipData);var d=b?"":a.types.join(",");if(!b){if(d.indexOf("text/html")!=-1&&d.indexOf("text/richtext")==-1)d+=",text/richtext";var e=a.getData("text/plain");var f=e?e.hashCode():0;p.send("880"+d+"\t"+f);y.clipData=a;da=true}})};this.copyToClipboard=function(a,b){var d=a=="text/plain"?"textarea":"div";var e=fb(d,false);var f=false;var g=
b.indexOf("data-sv-img")>0;var h;if(d=="div"){e.innerHTML=b;e.focus();if(g&&document.body.createControlRange){h=document.body.createControlRange();h.add(e.childNodes[0]);g=false}else u.selectEditable(e)}else{e.value=b;e.focus();e.select()}try{if(h)f=h.execCommand("Copy");else f=document.execCommand("copy",false,null)}catch(k){}finally{e.parentNode.removeChild(e);if(m)m.focus()}da=true;var l=g&&y.processImgCopy(b);if(!f){if(!l)hi5.notifications.notify({"title":__svi18n.info.userCopy,"msg":b,"timeout":9999,
"select":true,"format":a});return}return f};this.processFileGroup=function(a){if(a.type=="application/x-filegroup"){var b=a.value.split("\r\n");var d="";var e=0;b.forEach(function(a){var b=a.split("\t");if(b.length>1){if(d)d+=",";d+=b[0];e+=parseInt(b[1],10)}});if(d.length>28)d=d.substring(0,28)+"...";d=d+"<br>Total: "+hi5.tool.bytesToSize(e)+" Qty:"+b.length;hi5.notifications.notify({"title":__svi18n.info.download,"msg":d,"timeout":9E3,"cbYes":function(){this.destroy();M.download()},"cbNo":function(){this.destroy()}});
return true}else return false};this.processImgCopy=function(a){if(a.indexOf("data-sv-img")>0){hi5.notifications.notify({"title":__svi18n.info.imgCopyDownload,"msg":a,"timeout":9999});return true}else return false}};var Qb=u.isMacOS||u.isiOS;var V=new function e(){this.altUp=this.shiftUp=this.winUp=this.ctrlUp=true;this.preKeyCode=0;this.ignoreText=false;var a=this;this.sendMissKey=function(b){if(!a.shiftUp||b){n(false,42);a.shiftUp=true}if(!a.altUp||b){if(!a.altUp){n(false,56);n(true,56)}n(false,
56);a.altUp=true}if(!a.ctrlUp||b){n(false,29);a.ctrlUp=true}if(!a.winUp||b){n(false,219);a.winUp=true}};this.check=function(b){var e=ea.getKeyCode(b);var g=b.type=="keydown";switch(e){case 16:if(g&&a.shiftUp&&!b.altKey&&!C&&!b.metaKey)a.sendMissKey();a.shiftUp=!g;break;case 17:if(g&&a.ctrlUp&&!b.altKey&&!b.shiftKey)a.sendMissKey();a.ctrlUp=!g;C=g;break;case 18:if(g&&a.altUp&&!b.shiftKey&&!C&&!b.metaKey)a.sendMissKey();a.altUp=!g;break;case 91:case 92:if(g&&a.winUp&&!b.shiftKey&&!C&&!b.metaKey&&!b.altKey)a.sendMissKey();
a.winUp=!g;break;default:if(g&&!(C||b.altKey||b.shiftKey||b.metaKey))a.sendMissKey()}}};this.requestCredential=function(e,a){$a=false;var b=__svi18n.template.login;if(!b){h.showMessage("No value for login template");return}var f=document.createElement("div");f.className="appdlg";f.innerHTML=b;document.body.appendChild(f);var g=hi5.$("loginDomain");if(g&&e.nbDomain)g.innerHTML=e.nbDomain;var k=new hi5.Lightbox(f,.9);k.onclose=function(){document.body.removeChild(f)};k.show();g=hi5.$("loginUser");if(g)g.focus();
g=hi5.$("frmLogin");if(g)g.onsubmit=function(){var b=hi5.$("loginUser").value;var e=hi5.$("loginPassword").value;var f=hi5.$("loginDomain").innerHTML;k.dismiss();setTimeout(function(){a(b,e,f)},5);return false}};var m=null;if(L)Bb();else{var qb=hi5.$("tmContainer");if(qb)qb.parentNode.removeChild(qb)}if(L&&!t.toolbar.draggable)window.addEventListener("scroll",function(){setTimeout(function(){if(aa){var e=hi5.$("pc_key");if(e){e.style.top=window.pageYOffset+"px";e.style.left=window.pageXOffset+"px"}}if(h.toolbar){h.toolbar.style.top=
window.pageYOffset+"px";var a=window.pageXOffset+window.innerWidth*.45;h.toolbar.style.left=a+"px"}},200)},false);this.setCaretPos=function(e,a){uc=e;vc=a};this.showMessage=function(e,a){if(e&&t.displayMsg)hi5.notifications.notify(typeof e=="string"?{"msg":e,"timeout":a||0}:e)};this.hideWhenClose="hideWhenClose"in t?t.hideWhenClose:true;this.setReadOnly=function(e,a){N=!e;Rb=N||a===true};this.setPlayerMode=function(){ga=true;h.showToolbar=false;h.setReadOnly(true);h.hideWhenClose=false};this.setAutoScale=
function(e){var a="autoScale"in t;if(a)e=t.autoScale;if(e){Da(true);cb("hidden")}else if(!a)Da(false);wa=e};if(Za)Ca();this.setTouchpad=function(e){qa=e;var a=hi5.$("touchpadMode");if(a){a.checked=e;a.onchange=function(a){qa=a.target.checked}}if(e)if(!k)Ca()};this.setExtKeyboard=function(e){if(L){rb=true;m.adjust(true);m.setContentEditable(e?"true":"false");oa=e?1:0;if(u.isChrome)m.setFontSize("2em");if(e)m.focus();var a=hi5.$("extKBD");if(a&&a.checked!=e)a.checked=e}};this.focus=function(){if(m)D(m.element)};
this.getInputElement=function(){return m};this.scaleTo=function(e,a,b){var f=e/U;var g=a/O;if(!b){f=Math.min(f,g);g=f;P=f;ba=f}else{P=f;ba=g}hi5.tool.scale(l.parentNode,f,g)};this.setSize=function(e,a,b){if(q.isMultiMon)return;if(q.right!=q.left+e-1){q.right=q.left+e-1;q.bottom=q.top+a-1}U=e;O=a;if(!wa)cb(b);l.width=U;l.height=O;if(p)h.drawText(__svi18n.wait);if(wa)Da(true);if(L)Bb();tb();if(Z&&Z.visible())Z.dismiss()};this.reposition=function(){m.adjust()};this.setController=function(e){p=e;Ea=e.draw;
if(!p.sendInput)p.sendInput=p.send;if(L)u.setOrientaionHandler(function(){if(wa)Da(true);else setTimeout(function(){p.onorientationchange({svSurface:h,innerWidth:window.innerWidth,innerHeight:v(window.innerHeight)});if(!t.disableScoll)window.scrollTo(0,0)},300)})};this.setFileHandler=function(e){if(!("FileReader"in window))e=null;if(e){if(!M&&!ga){M=e;M.addEvent("uploaded",function(a){if(a)return;if(hi5.$("filecontainer")&&Xb&16){if(hi5.$("__cancelUpload"))hi5.$("__cancelUpload").style.visibility=
"hidden";h.fileProgress.maxValue=0;h.fileProgress.style.display="none";h.refreshFiles();h.showMessage(__svi18n.file.uploadDone,5E3)}});M.addEvent("uploadstarted",function(a){if(a)setTimeout(Ya,999)});if(hi5.$("filecontainer")){hi5.$("filecontainer").className="h5-form";h.fileProgress=new hi5.ProgressBar(hi5.$("total"));var a=hi5.$("__cancelUpload");if(a)a.addEventListener("click",function(){M.cancelAll()},false);M.addEvent("beforeupload",function(b,e,g){if(g)return;if(a)a.style.visibility="visible";
h.fileProgress.style.display="block";h.fileProgress.maxValue+=b.size});M.addEvent("progress",function(a){h.fileProgress.setProgress(a)})}else eb()}}else{M=null;h.fileProgress=null;eb();if(ka){ka.release();ka=null}}Db();hc()};this.setFeature=function(e){Xb=e;var a;var b=ga||!(e&16)&&!(e&65536);var f=!(e&16);var g=!(e&65536);if(f||ga)eb();if(e&128){a=hi5.$("uploadfile");if(a)a.style.visibility="hidden"}if(!(e&256)){a=hi5.$("shadowing");if(a)a.parentNode.removeChild(a)}if(!(e&1024)){a=hi5.$("ssParent");
if(a)a.parentNode.removeChild(a)}if(g&&f||ga)h.setFileHandler(null)};var gb=new function(){function e(){if(f.length===0){g=false;if(!h){var a=hi5.$("_sv_pdf_parent");if(a&&a.visible&&a.visible()&&a.dismiss)a.dismiss();setTimeout(function(){if(a&&a.parentNode)a.parentNode.removeChild(a)},9999)}}else b()}function a(a){var b=hi5.$("_sv_pdf_parent");var f=__svi18n.info.printready||"Your document is ready.";h=L&&!(u.isChrome&&(u.isWindows||u.isCrOS))||!!t.showPDFLink||u.isEdge;var g=h?'<p style="text-align:center;line-height:4em"><a href="'+
a+'" target="_blank">'+f+"</a></p>":(u.isChromeApp?"<webview":"<iframe")+' src="'+a+'" width="100%" height="100%" id="_iFramePDF">'+(u.isChromeApp?"</webview>":"</iframe>");if(!b){b=document.createElement("div");b.style.backgroundColor="white";b.style.width=h?"30%":"70%";b.style.height=h?"4elm":"70%";b.id="_sv_pdf_parent";if(h)b.style.overflow="scroll";b.innerHTML=g;document.body.appendChild(b);var k=new hi5.Lightbox(b);k.onclose=e;k.show()}else{var l=hi5.$("_iFramePDF");if(l)l.src=a;else b.innerHTML+=
g}}function b(){var b=f.shift();if(b)a(b);g=true}var f=[];var g=false;var h=false;this.clearPDF=function(){e()};this.showPDF=function(a){f.push(a);if(!g)b()}};this.close=function(){ob=false;if(!p)return;svGlobal.logger.info("close ui...");N=false;if(Pa)cancelAnimationFrame(Pa);Ma();dc();if(y){y.release();y=null}if(Oa){Oa.release();Oa=null}if(ka){ka.release();ka=null}if(Q){Q.release();Q=null}ea=null;V=null;la=null;Q=null;M=null;Z=null,k=null,fa=null,sa=null;Ea=null;p=null;h.fileProgress=null;gb.clearPDF();
if(wa)h.setAutoScale(false);if(aa){aa.setVisibility(false);aa=null}if(!("clearScreen"in t)||t.clearScreen)E.fillRect(0,0,l.width,l.height);window.svSurface=null;zb=true;if(!window||ga)return;try{if(hi5.notifications.notifySize()>0){hi5.notifications.onempty=function(){h.close();hi5.notifications.onempty=null};return}if($a)window.close();else{this.hide();if(u.isChromeApp){var e=chrome.app.window.current();if(e&&!t.disableMaxFullScn){e.onMaximized.removeListener(ub);if(e.isFullscreen()){e.restore();
e.restore()}}}}}catch(a){}h.context=null;E=null;l=null;h=null;svGlobal.logger.info("closed ui")};this.setFastCopy=function(e){Ub=e};this.drawLicense=function(e){if(t.drawLicense!=false){var a=e.charAt(0);E.save();E.font="12pt Arial";E.fillStyle=a=="W"?"red":"black";var b=e.substring(1);E.fillText(b,10,O-24);E.restore()}};this.drawText=function(e){var a=t.text||{};E.save();if(a.backgroundFillStyle){var b=l.width;var f=l.height;E.fillStyle=a.backgroundFillStyle;E.fillRect(0,0,b,f)}var g=20;var h=50;
if(a.textAlign=="center"){g=b/2;h=f/2}E.font=a.font||"18pt Arial";E.fillStyle=a.fillStyle||"black";if(a.textAlign)E.textAlign=a.textAlign;if(a.textBaseline)E.textBaseline=a.textBaseline;E.fillText(e,g,h);E.restore()};this.showPDF=function(e){gb.showPDF(e)};this.hide=function(){if(h.hideWhenClose){l.height=1;l.width=1}if(m)m.hide()};var ab=0;var Yb=false;var xc=new function(){var e=null;var a=null;this.createDialog=function(b,f,g){var h=document.createElement("div");h.className="copyDialog";var k=
document.createElement("div");k.innerHTML=f;k.className="hi5_notifer_title";h.appendChild(k);var l=document.createElement(g);if(g=="div")l.innerHTML=b;else l.value=b;l.style.border="1px solid #666";l.style.width="100%";l.style.minHeight="80px";h.appendChild(l);e=l;if(y.hasCopyCmd){a=document.createElement("input");a.className="btnCopy";a.type="button";a.value=__svi18n.info.copylable||"Copy";a.onclick=function(){if(g=="div")u.selectEditable(e);else e.select();document.execCommand("copy")};h.appendChild(a)}if(b.indexOf('data-sv-img="wmf"')>
0){var m=b.indexOf('src="')+5;var n=b.indexOf('"',m);if(n>m&&m>0){var p=document.createElement("a");p.href=b.substring(m,n);p.target="_blank";p.innerHTML="Download image";h.appendChild(p)}}return h};this.open=function(b,f,g){function k(){var l=xc.createDialog(b,f,g);document.body.appendChild(l);var m=new hi5.Lightbox(l);m.show();if(e&&b.indexOf("<img ")!==0)if(g=="div")u.selectEditable(e);else e.select();Ab();m.onclose=function(){hb();if(l&&l.parentNode)l.parentNode.removeChild(l);if(h.toolbar)h.toolbar.removeButton("_svClipInfo")};
if(!document.queryCommandEnabled("copy"))l.removeChild(a)}if(!g)g="div";if(h.beforeCopyDialog&&h.beforeCopyDialog(b,f,g))return;if(t.clipWarnAlways||!Yb){h.showMessage(__svi18n.info.copyWarning,5E3);Yb=true}clearTimeout(ab);var l=h.toolbar;if(!l)return;var m=l.getButton("_svClipInfo");if(m)m.onclick=k;else{m=l.addButton(t.img.copy?t.img.copy:"copy.png",k);m.id="_svClipInfo";m.className="pulse"}l.startFade();ab=setTimeout(function(){h.toolbar.removeButton("_svClipInfo")},3E4)}};this.copyToClip=function(e,
a){if(!ca)return;var b=y.parseClipData(e);if(t.copyTextOnly&&b.type!="text/plain")return;if(y.processFileGroup(b))return;if(y.waitingCopyContent){y.copyContent=b;return}setTimeout(function(){if(!ca||za&&pb==e)return;e=b.value;var a=e.indexOf("<img ")>0||t.copyDialog;if(!a||y.hasCopyCmd)a=!y.copyToClipboard(b.type,e)},50)};this.fullScreen=function(){l.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)};aa=new function a(){function b(a){oa=Date.now();var b=hi5.$("pc_key");if(!b)return;b.style.display=
"block";b.style.top=window.pageYOffset+"px";if(Q){Q.setValue("`\t`");Q.select()}}function f(a){oa=0;var b=hi5.$("pc_key");if(!b)return;b=hi5.$("shortcuts");if(b&&b.checked)return;q.style.display="none"}function g(){if(l)if(C)hi5.html.addClass(l,"button_selected");else hi5.html.removeClass(l,"button_selected");if(m)if(ta)hi5.html.addClass(m,"button_selected");else hi5.html.removeClass(m,"button_selected");if(p)if(Aa)hi5.html.addClass(p,"button_selected");else hi5.html.removeClass(p,"button_selected")}
function k(a){cancelDefault(a);var b=a.target;var f=b.innerHTML;f=f.replace(/\u2190/g,"left").replace(/\u2191/g,"up").replace(/\u2192/g,"right").replace(/\u2193/g,"down");switch(f){case "Ctrl":if(!l)l=b;if(C)n(false,29);else n(true,29);C=!C;g();return;case "Alt":if(!m)m=b;if(ta)n(false,56);else n(true,56);ta=!ta;g();return;case "Shift":if(!p)p=b;if(Aa)n(false,42);else n(true,42);Aa=!Aa;g();return;case "...":var r=hi5.$("pc_key_more");if(r)r.style.display=r.style.display=="block"?"none":"block";return;
case "Start":f="Ctrl+Esc";default:h.writeKeyComb(f);aa.resetModifier()}}var l=null;var m=null;var p=null;this.setVisibility=function(a){if(a)b();else f()};this.resetModifier=function(){if(ta){ta=false;n(false,56)}if(C){C=false;n(false,29)}if(Aa){Aa=false;n(false,42)}g()};var q=hi5.$("pc_key");if(!q)return;var t=q.getElementsByTagName("span");var y=t.length;var v=u.isFirefox?"mousedown":"touchstart";if(!("ontouchstart"in window))if(navigator.pointerEnabled)v="pointerdown";else if(navigator.msPointerEnabled)v=
"MSPointerDown";for(var A=0;A<y;A++){var E=t[A];E.className="button";E.addEventListener(v,k,false);if(v!="mousedown")E.addEventListener("mousedown",k,false)}q.style.position="absolute"};var Zb=hi5.$("shortcuts");if(Zb)Zb.addEventListener("change",function(a){aa.setVisibility(a.target.checked)});this.setKeysVisibility=function(a){if(aa)aa.setVisibility(a)};this.refreshFiles=function(){if(!Z||!Z.visible())Cb(null);else xa(".",Z)};this.processLink=function(a){function b(b){window.open(a);b.target.parentNode.removeChild(b.target)}
if(h.beforeOpenLink&&h.beforeOpenLink(a))return;clearTimeout(ab);var f=h.toolbar;var g=f.getButton("_svLinkInfo");if(g)g.onclick=b;else{g=f.addButton(t.img.link?t.img.link:"link.png",b);g.id="_svLinkInfo";g.className="pulse"}g.title=a;f.startFade();ab=setTimeout(function(){h.toolbar.removeButton("_svLinkInfo")},1E4)};this.setUnicode=function(a){if(!m)return;if(!a&&L&&(u.isiOS||u.isChrome&&!u.isWindows))a=true;Xa=!a;svGlobal.logger.info("Unicode:"+a);K.onkeydown=K.onkeyup=a?lc:nc;if(!a&&p&&p.sendKeyboardSynchronize)K.onkeypress=
mc;K.ontextinput=pc};this.setTouchRemoting=function(a){if(a===true){sa=new pa(h,l);svGlobal.logger.info("touch remoting");h.showMessage(__svi18n.info.touchremoting)}else sa=new ua(h)};this.setClipboard=function(a){ca=a;za=a?!u.isChromeApp&&!t.copyDialog:false};this.setJoinMode=function(a){p.setJoinMode(a)};this.requestControl=function(){p.requestControl()};this.repaint=function(a,b,f,g){if(q.isMultiMon){if(a<q.left)a=q.left;if(b<q.top)b=q.top;if(f>q.right)f=q.right;if(g>q.bottom)g=q.bottom;if(a<=
q.right&&b<=q.bottom){var h=p.refresh(a,b,f,g);if(h)E.putImageData(h.imgData,h.left-q.left,h.top-q.top,0,0,h.width,h.height)}}else{h=p.refresh(a,b,f,g);if(h)E.putImageData(h.imgData,h.left,h.top,0,0,h.width,h.height)}};this.running=function(){return ob};this.run=function(a,b){function f(a){a.target.removeEventListener("click",f,false);p.send("884")}ea.converMacCtrl=b!==false;ob=true;tb();hi5.notifications.clearAll();if((a==3758162961||a==3758162962)&&m)m.setContentEditable("false");ea.setLayout(a);
var g=[99997,99998,99999].indexOf(a)!=-1;Xa=!g;Mb=(g||[1033,3758162961,3758162962,1049].indexOf(a)==-1)&&u.isMacOS;if(typeof t.closeOnDisconn=="boolean")$a=t.closeOnDisconn;else $a=!!window.opener&&!u.isChromeApp;if(!t.disableScoll)window.scrollTo(0,0);Db();fc();var k=m.element;if(L){if(!ga){sa=new ua(h);var n=new ia(k);n.ontouch=kc;n.onmousedown=Ia;n.onmousemove=Ja;n.onmouseup=Ka;Y(k,Tb,false);document.addEventListener("paste",y.onPaste,false);if(ca)if(za){document.addEventListener("copy",y.onCopy,
false);document.addEventListener("cut",y.onCopy,false)}}}else{if(!ga){document.addEventListener("mousemove",Ja,false);k.addEventListener("mousedown",Ia,false);document.addEventListener("mouseup",Ka,false);k.addEventListener("mouseleave",La,false);k.addEventListener("mouseenter",La,false);Y(k,Tb,false);k.addEventListener("paste",y.onPaste,false);if(ca)if(za){k.addEventListener("copy",y.onCopy,false);k.addEventListener("cut",y.onCopy,false)}}if(t.autoFocus!==false)D(k)}h.setUnicode(g);this.drawText(__svi18n.wait);
if(h.onstart)h.onstart(l);k.addEventListener("click",f,false);if(Ea)Pa=requestAnimationFrame(Fb);m.adjust();if(!t.disableScoll)window.scrollTo(0,0)};var Gb=t.animation||42;if(X&&!u.isEdge)Gb*=2;var ic={"&euro;":"\ufffd","&nbsp;":" ","&quot;":'"',"&amp;":"&","&lt;":"<","&gt;":">","&iexcl;":"\ufffd","&cent;":"\ufffd","&pound;":"\ufffd","&curren;":"\ufffd","&yen;":"\ufffd","&brvbar;":"\ufffd","&sect;":"\ufffd","&uml;":"\ufffd","&copy;":"\ufffd","&ordf;":"\ufffd","&reg;":"\ufffd"};this.moveCursorBy=this.movCursorBy=
Hb;this.moveCursor=function(a,b,f,g,h){a-=q.left;b-=q.top;if(a<0||b<0||a>=U||b>=O)return;if(!k)Ca();if(k.style.visibility=="hidden")k.style.visibility="visible";k.scrX=a;k.scrY=b;var l=a-k.hotX;var m=b-k.hotY;if(g&&g.length>9)g=g.substring(0,9);k.moveCursor(l+q.offX,m+q.offY,g,h);if(N&&!f)p.sendInput("82"+a+"\t"+b);q.x=a;q.y=b};var $b=hi5.$("svTouchInput");if($b)$b.addEventListener("click",function(){Ib()},false);this.touchstart=function(a){switch(a.pointes){case 1:if(qa){if(!k)Ca();kb("touchstart",
a.screenX,a.screenY,!a.flick)}else if(!a.flick||na()){var b=m.element.getBoundingClientRect();var f=a.x-b.left;var g=a.y-b.top;if(h.mouseMoveEmu){jc(Vb,Wb,f,g);Vb=f;Wb=g}Sa(f,g,0)}break;case 2:Ra=a.screenX;ya=a.screenY}};this.touchmove=function(a){var b=m.element.getBoundingClientRect();switch(a.pointes){case 1:if(qa)kb("touchmove",a.screenX,a.screenY,!a.flick);else if(!a.flick||na())Ua(a.x-b.left,a.y-b.top);break;case 2:if(Math.abs(a.screenY-ya)>=40){Sb(a.x-b.left,a.y-b.top,a.screenY-ya>0?0:1);Ra=
a.screenX;ya=a.screenY}case 3:}};this.touchend=function(a){var b=a.pointes;var f=m.element.getBoundingClientRect();switch(b){case 1:if(qa)kb("touchend",a.screenX,a.screenY,!a.flick);else{Qa(a.x,a.y,true);if(!a.flick||na())Ta(a.x-f.left,a.y-f.top,0)}break;case 2:if(!a.moved)Lb(qa?k.scrX:a.x-f.left,qa?k.scrY:a.y-f.top);break;case 3:if(a.gesture)switch(a.gesture){case "OPEN":n(true,219);n(true,200);n(false,200);n(false,219);break;case "CLOSE":n(true,219);n(true,208);n(false,208);n(false,219);break;case "LEFT":n(true,
56);n(true,1);n(false,1);n(false,56);break;case "RIGHT":n(true,42);n(true,56);n(true,1);n(false,1);n(false,56);n(false,42);break;case "UP":n(true,42);n(true,219);ha(true,77);ha(false,77);n(false,219);n(false,42);break;case "DOWN":n(true,219);ha(true,77);ha(false,77);n(false,219)}else Ib()}};this.flick=function(a){switch(a.from){case 4:p.sendInput("84"+"0\t"+209);p.sendInput("84"+"49152\t"+209);break;case 2:p.sendInput("84"+"0\t"+201);p.sendInput("84"+"49152\t"+201)}};this.longpress=function(a){if(qa)a.pointes=
2;var b=m.element.getBoundingClientRect();switch(a.pointes){case 1:Lb(a.x-b.left,a.y-b.top);break;case 2:if(k){Sa(k.scrX,k.scrY,2,1);Ta(k.scrX,k.scrY,2,1)}}};this.redirectTouches=function(a){if(!N)return;var b=a.length;var f;var g="90"+b;for(var h=0;h<b;h++){f=a[h];g=g+"\t"+f.contactId+";"+f.contactFlags+";"+Math.floor(f.x/P)+";"+Math.floor(f.y/ba)}p.send(g)};var Va=0;this.setIgnorePaste=function(a){da=a};this.processClipReq=function(a){if(!ca){p.send("881ERROR\t");return true}var b=y.clipData;if(b||
da){Pb(b,a);return true}else y.accessClip(function(b){Pb(b,a)});return document.queryCommandSupported("paste")};var Wa=X?function(){var a;this.sendCtrlVLater=function(){a=setTimeout(Ya,333)};this.cancelCtrlV=function(){clearTimeout(a)};return this}():null;var va={};this.getMousePosition=function(){return q};var rc={29:197,33:201,34:209,35:207,36:199,37:203,38:200,39:205,40:208,154:183,45:210,46:211,225:184,91:219,92:220,93:221,27:1,8:14,9:15,13:28,224:29,17:29,16:42,18:56,20:58,166:59,112:59,167:60,
113:60,168:61,114:61,183:62,115:62,182:63,116:63,216:64,117:64,217:65,118:65,173:66,119:66,174:67,120:67,175:68,121:68,122:87,123:88};this.writeKeyComb=function(a){p.writeKeyComb(a)};this.setCursor=function(a){if(!a)return;if(t.disableCursor)return;fa=a;if(k)k.setCursor(a);if(k&&(!Za||a.system))k.hideCursor();if(!ga){if(!a.result)a.result=tc(a);if(m)m.element.style.cursor=a.result;else l.style.cursor=a.result}};this.setVisible=function(a,b){var f=a?"visible":"hidden";if(typeof b=="number")setTimeout(function(){l.style.visibility=
f},b);else l.style.visibility=f}}if(!svGlobal.LocalInterface)svGlobal.LocalInterface=LocalInterface;
svGlobal.rdpFile={loadRdpFile:function(l,H){var v=H.elements;var D=l.split("\r\n");if(D.length<2)D=l.split("\n");if(D.length<2)return false;var I=hi5.$("gateway");var R=I.value;H.reset();I.value=R;var Y=0;for(var ia=D.length;Y<ia;Y++){var na=D[Y];var pa=na.indexOf(":");var ua=na.substring(0,pa);var A=na.substring(pa+3);ua=ua.toLowerCase();switch(ua){case "full address":pa=A.indexOf(":");if(pa>0){v["server"].value=A.substring(0,pa);v["port"].value=A.substring(pa+1)}else v["server"].value=A;break;case "username":v["user"].value=
A;break;case "domain":v["domain"].value=A;break;case "connect to console":v["useConsole"].checked=A!="0";break;case "desktopwidth":v["width"].value=A;break;case "desktopheight":v["height"].value=A;break;case "session bpp":v["server_bpp"].value=A;break;case "audiomode":v["playSound"].value=A;break;case "alternate shell":if(A.length>0){v["command"].value=A;if(!hi5.$("app").checked)hi5.$("shell").checked=true}break;case "shell working directory":v["directory"]=A;break;case "redirectclipboard":v["mapClipboard"].checked=
A!="0";break;case "redirectprinters":v["mapPrinter"].checked=A!="0";break;case "server port":if(A.length>0)v["port"].value=A;break;case "disable wallpaper":v["background"].checked=A=="0";break;case "disable themes":v["styles"].checked=A=="0";break;case "disable menu anims":v["animation"].checked=A=="0";break;case "disable full window drag":v["contents"].checked=A=="0";break;case "allow font smoothing":v["smoothfont"].checked=A!="0";break;case "allow desktop composition":v["composition"].checked=A!=
"0";break;case "bitmapcachepersistenable":v["bitmap"].checked=A!="0";break;case "remoteapplicationprogram":v["exe"].value=A;break;case "remoteapplicationcmdline":v["args"].value=A;break;case "remoteapplicationmode":hi5.$("app").checked=A=="1";break;case "loadbalanceinfo":v["loadBalanceInfo"].value=A}}return true},handleFiles:function(l,H){if(l.length!=1){hi5.notifications.notify({"msg":"Please one file only"});return}var v=l[0];var D=v.name;var I=D.length;var R=I>4&&D.substring(I-4).toLowerCase()==
".rdp";if(!R){hi5.notifications.notify({"msg":"Sorry, Please .rdp file only"});return}var Y=new FileReader;var ia=false;Y.onload=function(l){var D=l.target.result;if(!D)return;var I=svGlobal.rdpFile.loadRdpFile(D,H);if(!I&&!ia){ia=true;Y.readAsText(v)}};Y.readAsText(v,"UTF-16LE")}};
function initDragDrop(l,H){function v(l){svGlobal.rdpFile.handleFiles(l.target.files,H)}function D(v){cancelDefault(v);l.style.backgroundColor=Y;var D=v.dataTransfer.files;svGlobal.rdpFile.handleFiles(D,H)}function I(v){cancelDefault(v);l.style.backgroundColor="yellow"}function R(v){cancelDefault(v);l.style.backgroundColor=Y}if(!("FileReader"in window))return;var Y=l.style.backgroundColor;var ia=hi5.$("rdpfile");if(ia)ia.addEventListener("change",v,false);l.addEventListener("dragover",I,false);l.addEventListener("dragleave",
R,false);l.addEventListener("drop",D,false)}svGlobal.util.initDragDrop=initDragDrop;
svGlobal.util.initMapDisk=svGlobal.util.MapDisk=function(l,H,v){function D(v){cancelDefault(v);if(!H)return;if(l.style.opacity!="0.6")l.style.opacity="0.6";l.style.backgroundColor="yellow"}function I(v){cancelDefault(v);if(!H)return;l.style.opacity=l.__oldOpacity;l.style.backgroundColor=l.__oldColor}function R(D){cancelDefault(D);if(!H)return;l.style.opacity=l.__oldOpacity;l.style.backgroundColor=l.__oldColor;var I=hi5.file.getEntries(D);if(I.length&&location.protocol!="file:")hi5.file.getFilesFromEntries(I,
function(l){if(H.addFiles)H.addFiles(l,v);else H.addFile(l[0])});else if(H.addFiles)H.addFiles(D.dataTransfer.files,v);else H.addFile(D.dataTransfer.files[0])}if(!("FileReader"in window))return;l.__oldColor=l.style.backgroundColor;l.__oldOpacity=l.style.opacity;l.addEventListener("dragover",D,false);l.addEventListener("dragleave",I,false);l.addEventListener("drop",R,false);this.release=function(){l.removeEventListener("dragover",D,false);l.removeEventListener("dragleave",I,false);l.removeEventListener("drop",
R,false);H=null;l=null}};(function init(){function H(v){var D=document.getElementsByClassName("ver");var I=D.length;for(var R=0;R<I;R++)D[R].innerHTML=svGlobal.version;window.removeEventListener("load",H,false)}window.addEventListener("load",H,false)})();svGlobal.logger.info("ver:"+svGlobal.version);
